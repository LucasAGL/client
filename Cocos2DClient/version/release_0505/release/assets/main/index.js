System.register("chunks:///_virtual/UIStatisticalItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,r,a,l,n,o,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){l=e.cclegacy,n=e._decorator,o=e.Label,s=e.Component}],execute:function(){var u,c,p,b,g,m,f,h,y,k,z,I,v,w,d,q,x;l._RF.push({},"01b20LnmqRCk6FvpJOVhGT8","UIStatisticalItem",void 0);var S=n.ccclass,_=n.property;e("UIStatisticalItem",(u=S("UIStatisticalItem"),c=_(o),p=_(o),b=_(o),g=_(o),m=_(o),f=_(o),h=_(o),u((z=t((k=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),n=0;n<i;n++)l[n]=arguments[n];return t=e.call.apply(e,[this].concat(l))||this,r(a(t),"rank",z,a(t)),r(a(t),"teamName",I,a(t)),r(a(t),"score",v,a(t)),r(a(t),"explore",w,a(t)),r(a(t),"kills",d,a(t)),r(a(t),"equip",q,a(t)),r(a(t),"forage",x,a(t)),t}i(t,e);var l=t.prototype;return l.start=function(){},l.bindData=function(e){this.rank.string=""+e.rank,this.teamName.string=e.teamName,this.score.string=""+e.score,this.explore.string=""+e.explore,this.kills.string=""+e.kills,this.equip.string=""+e.equip,this.forage.string=""+e.forage},t}(s)).prototype,"rank",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(k.prototype,"teamName",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(k.prototype,"score",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(k.prototype,"explore",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=t(k.prototype,"kills",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(k.prototype,"equip",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(k.prototype,"forage",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=k))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/NPCResources.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ResourceGroup.ts"],(function(e){"use strict";var t,r,s,u,o;return{setters:[function(e){t=e.inheritsLoose,r=e.defineProperty,s=e.assertThisInitialized},function(e){u=e.cclegacy},function(e){o=e.ResourceGroup}],execute:function(){u._RF.push({},"0b2deY71mZK17TrIYyzzNg5","NPCResources",void 0);e("NPCResources",function(e){function u(){var t;return t=e.call(this)||this,r(s(t),"health",void 0),t.health=t.AddResource("health"),t}return t(u,e),u}(o));u._RF.pop()}}}));

System.register("chunks:///_virtual/Main.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts","./ResourcesHelper.ts"],(function(e){"use strict";var t,i,l,a,o,n,r,s,c,p,d,u,f,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,l=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.defineProperty},function(e){n=e.cclegacy,r=e._decorator,s=e.Label,c=e.Node,p=e.resources,d=e.director,u=e.Component},function(e){f=e.GlobalConfig},function(e){b=e.ResourcesHelper}],execute:function(){var y,g,h,L,v,m,x,z,F;n._RF.push({},"0b57dA4RDtH9IgcMxyFidzf","Main",void 0);var R=r.ccclass,U=r.property;e("Main",(y=R("Main"),g=U(s),h=U(s),L=U(c),y((x=t((m=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return t=e.call.apply(e,[this].concat(n))||this,l(a(t),"uploadLabel",x,a(t)),l(a(t),"loadingLabel",z,a(t)),l(a(t),"btnUpload",F,a(t)),o(a(t),"file",void 0),t}i(t,e);var n=t.prototype;return n.start=function(){this.initUpload()},n.initUpload=function(){p.loadDir(b.character),this.loadingLabel.string="Loading . . .",this.uploadLabel.string="0%";var e=document.createElement("input");e.type="file",e.name="fileToUpload",e.accept=".json, .replay",e.style.width="10px",e.style.height="10px",e.style.top="0",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.margin="auto",e.style.position="absolute",e.style.fontSize="30px",e.style.opacity="0";var t=new FileReader,i=this;e.onchange=function(l){e.files.length>0&&(i.loadingLabel&&(i.loadingLabel.node.active=!0),i.uploadLabel&&(i.uploadLabel.node.active=!0),i.btnUpload&&(i.btnUpload.active=!1),t.readAsText(e.files[0]))},t.onload=function(i){if(FileReader.DONE==t.readyState)try{f.replay=JSON.parse(t.result),e.remove(),d.loadScene("Game")}catch(e){}},t.onprogress=function(e){i.uploadLabel.string=(e.loaded/e.total*100).toFixed(1)+"%"},document.body.appendChild(e),this.file=e},n.onFileClick=function(){this.file&&this.file.click()},t}(u)).prototype,"uploadLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(m.prototype,"loadingLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(m.prototype,"btnUpload",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=m))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillGroup.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts"],(function(l){"use strict";var i,t,e,s,n;return{setters:[function(l){i=l.inheritsLoose,t=l.defineProperty,e=l.assertThisInitialized},function(l){s=l.cclegacy},function(l){n=l.Component}],execute:function(){s._RF.push({},"0bc8cboo/VOaaf+iuQf3u/O","SkillGroup",void 0);var r=l("Skill",function(l){function s(){for(var i,s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return i=l.call.apply(l,[this].concat(n))||this,t(e(i),"level",0),t(e(i),"exp",0),i}return i(s,l),s.prototype.UpdateSkill=function(l){this.level=l.level,this.exp=l.exp},s}(n));l("SkillGroup",function(l){function s(){var i;return i=l.call(this)||this,t(e(i),"skills",void 0),t(e(i),"level",void 0),i.skills={},i.level=0,i}i(s,l);var n=s.prototype;return n.AddSkill=function(l){return null==this.skills[l]&&(this.skills[l]=new r),this.skills[l]},n.UpdateSkill=function(l,i){if(null!=this.skills[l])return this.skills[l].level=i.level,this.skills[l].exp=i.exp,this.skills[l]},n.UpdateSkills=function(l){for(var i in l)this.UpdateSkill(i,l[i]);var t=[];for(var e in this.skills)null==l[e]&&t.push(e);for(var s=0;s<t.length;s++)delete this.skills[t[s]]},n.UpdateUI=function(){},n.GetSkill=function(l){return this.skills&&this.skills[l]},s}(n));s._RF.pop()}}}));

System.register("chunks:///_virtual/Metrics.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts"],(function(e){"use strict";var i,t,n,r,l,o;return{setters:[function(e){i=e.inheritsLoose,t=e.createClass,n=e.defineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy},function(e){o=e.Component}],execute:function(){l._RF.push({},"21e425rQgNKYKSiB8R3Qjgs","Metrics",void 0);var a=e("Metrics",function(e){function l(){for(var i,t=arguments.length,l=new Array(t),o=0;o<t;o++)l[o]=arguments[o];return i=e.call.apply(e,[this].concat(l))||this,n(r(i),"Achivement",0),n(r(i),"PlayerDefeats",0),n(r(i),"Foraging",0),n(r(i),"Exploration",0),n(r(i),"Equipment",0),n(r(i),"TimeAlive",0),i}return i(l,e),l.prototype.bindData=function(e){null!=e.Achivement&&(this.Achivement=e.Achivement),null!=e.PlayerDefeats&&(this.PlayerDefeats=e.PlayerDefeats),null!=e.Foraging&&(this.Foraging=e.Foraging),null!=e.Exploration&&(this.Exploration=e.Exploration),null!=e.Equipment&&(this.Equipment=e.Equipment),null!=e.TimeAlive&&(this.TimeAlive=e.TimeAlive)},l.calculateScore=function(e,i,t,n){var r=0;e>=6?r+=l.high:e>=3?r+=l.mid:e>=1&&(r+=l.low);var o=i;o>=20?r+=l.high:o>=10?r+=l.mid:o>=1&&(r+=l.low);var a=t;a>=127?r+=l.high:a>=64?r+=l.mid:a>=32&&(r+=l.low);var s=n;return s>=50?r+=l.high:s>=35?r+=l.mid:s>=20&&(r+=l.low),r},t(l,[{key:"total",get:function(){return l.calculateScore(this.PlayerDefeats,this.Equipment,this.Exploration,this.Foraging)}}]),l}(o));n(a,"high",21),n(a,"mid",10),n(a,"low",4),l._RF.pop()}}}));

System.register("chunks:///_virtual/Adapter.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i,r,o,s,c,a,u,h,d;return{setters:[function(e){t=e.inheritsLoose,n=e.defineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,s=e.find,c=e.Canvas,a=e.view,u=e.Size,h=e.UITransform,d=e.Component}],execute:function(){var l;r._RF.push({},"24f3bWB2rlDLrfByNmDdvBI","Adapter",void 0);var p=o.ccclass;o.property,e("Adapter",p("Adapter")(l=function(e){function r(){for(var t,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(i(t),"curDR",null),t}t(r,e);var o=r.prototype;return o.start=function(){this.resize()},o.resize=function(){var e=s("Canvas").getComponent(c);this.curDR||(this.curDR=a.getDesignResolutionSize());var t=this.curDR,n=new u(document.body.clientWidth,document.body.clientHeight),i=n.width,r=n.height,o=i,d=r;i/r>t.width/t.height?o=(d=t.height)*i/r:d=r/i*(o=t.width),a.setDesignResolutionSize(o,d,5),e.node.getComponent(h).setContentSize(o,d),e.node.emit("resize")},r}(d))||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/DropdownItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,i,n,o,l,a,c,u,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Label,c=e.Sprite,u=e.Toggle,p=e.Component}],execute:function(){var s,b,f,g,m,y,d,h,w,v,z;o._RF.push({},"273f2S8stlFl5+KrKwHBAbR","DropdownItem",void 0);var D=l.ccclass,k=l.property;e("default",(s=D("DropdownItem"),b=k(a),f=k(c),g=k(u),m=k(c),s((h=r((d=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return r=e.call.apply(e,[this].concat(o))||this,i(n(r),"label",h,n(r)),i(n(r),"sprite",w,n(r)),i(n(r),"toggle",v,n(r)),i(n(r),"checkmark",z,n(r)),r}return t(r,e),r}(p)).prototype,"label",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),w=r(d.prototype,"sprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),v=r(d.prototype,"toggle",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),z=r(d.prototype,"checkmark",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=d))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/TileInfoPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Event.ts"],(function(e){"use strict";var i,t,n,r,l,o,a,c,s,u,p,f;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,a=e.Label,c=e.Sprite,s=e.SpriteFrame,u=e.Component},function(e){p=e.EventManager,f=e.BattleEvent}],execute:function(){var b,v,h,y,g,I,d,m,T,_,z;l._RF.push({},"2819de0suZAbL/Hnr8hgYXh","TileInfoPanel",void 0);var P=o.ccclass,w=o.property;e("TileInfoPanel",(b=P("TileInfoPanel"),v=w(a),h=w(a),y=w(c),g=w({type:[s],visible:!0}),b((m=i((d=function(e){function i(){var i;return i=e.call(this)||this,n(r(i),"tileInfo",m,r(i)),n(r(i),"resource",T,r(i)),n(r(i),"icon",_,r(i)),n(r(i),"tiles",z,r(i)),p.view.on(f.SelectedTile,i.BinTileInfo,r(i)),i}t(i,e);var l=i.prototype;return l.start=function(){},l.BinTileInfo=function(e){null==e?this.node.active=!1:(this.node.active=!0,this.icon.spriteFrame=this.tiles[e.val],this.tileInfo.string="tile_"+e.r+"_"+e.c)},i}(u)).prototype,"tileInfo",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=i(d.prototype,"resource",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=i(d.prototype,"icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=i(d.prototype,"tiles",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=d))||I));l._RF.pop()}}}));

System.register("chunks:///_virtual/UIStatisticalData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIStatisticalItem.ts","./StatisticalManager.ts"],(function(t){"use strict";var e,i,a,n,r,s,o,l,c,u,h,p,f;return{setters:[function(t){e=t.defineProperty,i=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,l=t.Prefab,c=t.Node,u=t.instantiate,h=t.Component},function(t){p=t.UIStatisticalItem},function(t){f=t.StatisticalManager}],execute:function(){var m,d,b,g,D,y,S,U,I,v,P;s._RF.push({},"2b56465oTtP06rxKIEXjnbU","UIStatisticalData",void 0);var _=o.ccclass,T=o.property;t("UIStatisticalData",(m=_("UIStatisticalData"),d=T(l),b=T([p]),g=T(c),m((P=v=function(t){function i(){for(var i,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s))||this,n(r(i),"itemPrefab",S,r(i)),n(r(i),"items",U,r(i)),n(r(i),"content",I,r(i)),e(r(i),"_lastUpdateTime",0),i}a(i,t);var s=i.prototype;return s.start=function(){this.BindStatisticalData()},s.BindStatisticalData=function(){for(var t=f.instance.GetItems(),e=0;e<t.length;e++)if(e<this.items.length)this.items[e].bindData(t[e]);else{var i=u(this.itemPrefab);i.getComponent(p).bindData(t[e]),this.items.push(i.getComponent(p)),this.content.addChild(i)}t.length<this.items.length&&this.items.slice(t.length,this.items.length-t.length).forEach((function(t){t.node.destroy()}))},s.update=function(t){this.node.active&&Date.now()-this._lastUpdateTime>i.UPDATE_DELAY&&(this._lastUpdateTime=Date.now(),this.BindStatisticalData())},i}(h),e(v,"UPDATE_DELAY",1e3),S=i((y=P).prototype,"itemPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=i(y.prototype,"items",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=i(y.prototype,"content",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=y))||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/Component.ts",["cc"],(function(n){"use strict";var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"2bf2cYuQ5VIr5FDlvU5xVq/","Component",void 0);n("Component",function(){function n(){}var t=n.prototype;return t.Unpack=function(n,t){return t[n]},t.UnpackList=function(n,t){return null},t.Update=function(n){},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalConfig.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,a,t,l,n;return{setters:[function(e){i=e.createClass,a=e.defineProperty},function(e){t=e.cclegacy,l=e.math,n=e.Size}],execute:function(){t._RF.push({},"2c65bkhpBRFyaCBZLMpwyw5","GlobalConfig",void 0);var S=e("GlobalConfig",function(){function e(){}return i(e,null,[{key:"TickFrac",get:function(){return e.StepTick/e.SpeedRate}}]),e}());a(S,"MAX_SPEED",8),a(S,"MIN_SPEED",1),a(S,"BASE_FLY_TIME",.5),a(S,"RADIAN",l.toRadian(30)),a(S,"BORDER_SIZE",16),a(S,"TILE_SIZE_25D",new n(256,285)),a(S,"TILE_SIZE",new n(128,128)),a(S,"MapSize",160),a(S,"MapPixelSize",new n(128,128)),a(S,"TilePixelSize",new n(128,128)),a(S,"RealMapPixelSize",new n(128,128)),a(S,"Border",16),a(S,"BorderWidth",S.TilePixelSize.x*S.BORDER_SIZE),a(S,"LastDataMap",{}),a(S,"replay",void 0),a(S,"step",0),a(S,"SpeedRate",1),a(S,"SpeedRates",[.5,1,2,4,8]),a(S,"Scales",[.04,.1,.4]),a(S,"ScaleIndex",0),a(S,"CurScale",.04),a(S,"LastScale",.04),a(S,"MinScale",.04),a(S,"MaxScale",.4),a(S,"ScaleStep",.1),a(S,"StepTick",600),a(S,"Use25D",!0),a(S,"RhombusSize",new n(S.TilePixelSize.x,S.TilePixelSize.x*Math.sin(S.RADIAN))),a(S,"HRhombusSize",new n(S.RhombusSize.x/2,S.RhombusSize.y/2)),a(S,"Pause",!0),a(S,"PosZIndexMap",{}),a(S,"FlyTime",S.BASE_FLY_TIME/S.SpeedRate),t._RF.pop()}}}));

System.register("chunks:///_virtual/StatisticalManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EntityManager.ts"],(function(t){"use strict";var a,i,e;return{setters:[function(t){a=t.defineProperty},function(t){i=t.cclegacy},function(t){e=t.EntityManager}],execute:function(){i._RF.push({},"2e86c5AfiRL2L5tij9rSDoy","StatisticalManager",void 0);var r=t("StatisticalData",function(){function t(i,e,r,n,o){a(this,"rank",void 0),a(this,"teamName",void 0),a(this,"explore",void 0),a(this,"kills",void 0),a(this,"equip",void 0),a(this,"forage",void 0),a(this,"score",void 0),this.teamName=i,this.kills=e,this.equip=r,this.explore=n,this.forage=o,this.score=t.calculateScore(e,r,n,o)}return t.calculateScore=function(a,i,e,r){var n=0;a>=6?n+=t.high:a>=3?n+=t.mid:a>=1&&(n+=t.low);var o=i;o>=20?n+=t.high:o>=10?n+=t.mid:o>=1&&(n+=t.low);var s=e;s>=127?n+=t.high:s>=64?n+=t.mid:s>=32&&(n+=t.low);var c=r;return c>=50?n+=t.high:c>=35?n+=t.mid:c>=20&&(n+=t.low),n},t}());a(r,"high",21),a(r,"mid",10),a(r,"low",4);var n=t("StatisticalManager",function(){function t(){}var a=t.prototype;return a.GetItems=function(){for(var t=[],a=e.instance.teams,i=0;i<a.length;i++){var r=this.calculateStatisticalData(a[i]);t.push(r)}t.sort((function(t,a){return a.score-t.score}));for(var n=0;n<t.length;n++)t[n].rank=n+1;return t},a.calculateStatisticalData=function(t){for(var a=e.instance.GetPlayersByTeam(t),i=0,n=0,o=0,s=0,c=0;c<a.length;c++){var l=a[c].data.metrics;i=Math.max(i,l.PlayerDefeats),n=Math.max(n,l.Equipment),o=Math.max(o,l.Exploration),s=Math.max(s,l.Foraging)}return new r(t,i,n,o,s)},t}());a(n,"instance",void 0),i._RF.pop()}}}));

System.register("chunks:///_virtual/SkillType.ts",["cc"],(function(e){"use strict";var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){var t,n;e({SkillDir:void 0,SkillType:void 0}),i._RF.push({},"313feVyaStA3oiYVC5vufqG","SkillType",void 0),function(e){e[e.constitution=0]="constitution",e[e.melee=1]="melee",e[e.range=2]="range",e[e.mage=3]="mage",e[e.defense=4]="defense",e[e.fishing=5]="fishing",e[e.hunting=6]="hunting"}(t||(t=e("SkillType",{}))),function(e){e[e.RightUp=1]="RightUp",e[e.Right=2]="Right",e[e.RightDown=3]="RightDown",e[e.Down=4]="Down",e[e.LeftDown=5]="LeftDown",e[e.Left=6]="Left",e[e.LeftUp=7]="LeftUp",e[e.Up=8]="Up"}(n||(n=e("SkillDir",{}))),i._RF.pop()}}}));

System.register("chunks:///_virtual/UIAgentStatus.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Event.ts","./UIAgentStatusItem.ts"],(function(t){"use strict";var e,i,n,a,l,r,o,s,u,p,h,c,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,l=t.defineProperty},function(t){r=t.cclegacy,o=t._decorator,s=t.Label,u=t.Node,p=t.Component},function(t){h=t.EventManager,c=t.BattleEvent},function(t){y=t.UIAgentStatusItem}],execute:function(){var g,m,f,b,v,d,_,w,D,k,U,z,A,S,I,E,M,P,B,L,R,x,N,q,T,F,C,G,O,j,H,J,K,V,Q,W,X;r._RF.push({},"3989dyB6wpKCbyNV4DvyJcA","UIAgentStatus",void 0);var Y=o.ccclass,Z=o.property;t("UIAgentStatus",(g=Y("UIAgentStatus"),m=Z(s),f=Z({type:y,group:"Property"}),b=Z({type:y,group:"Property"}),v=Z({type:y,group:"Property"}),d=Z({type:y,group:"Skills"}),_=Z({type:y,group:"Skills"}),w=Z({type:y,group:"Skills"}),D=Z({type:y,group:"Skills"}),k=Z({type:y,group:"Skills"}),U=Z({type:y,group:"Skills"}),z=Z({type:y,group:"Skills"}),A=Z(u),S=Z({type:y,group:"Achievement"}),I=Z({type:y,group:"Achievement"}),E=Z({type:y,group:"Achievement"}),M=Z({type:y,group:"Achievement"}),P=Z({type:s,group:"Achievement"}),g((R=e((L=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(a(e),"agentName",R,a(e)),n(a(e),"health",x,a(e)),n(a(e),"food",N,a(e)),n(a(e),"water",q,a(e)),n(a(e),"melee",T,a(e)),n(a(e),"defense",F,a(e)),n(a(e),"range",C,a(e)),n(a(e),"hunting",G,a(e)),n(a(e),"mage",O,a(e)),n(a(e),"fishing",j,a(e)),n(a(e),"constitution",H,a(e)),n(a(e),"achievement",J,a(e)),n(a(e),"exploration",K,a(e)),n(a(e),"kills",V,a(e)),n(a(e),"equipment",Q,a(e)),n(a(e),"foraging",W,a(e)),n(a(e),"total",X,a(e)),l(a(e),"_entityData",void 0),l(a(e),"_resourcesMap",void 0),l(a(e),"_skillsMap",void 0),l(a(e),"_delay",50),l(a(e),"_lastUpdateTime",0),e}i(e,t);var r=e.prototype;return r.start=function(){this._resourcesMap={health:this.health,food:this.food,water:this.water},this._skillsMap={melee:this.melee,defense:this.defense,range:this.range,hunting:this.hunting,mage:this.mage,fishing:this.fishing,constitution:this.constitution},h.view.on(c.RemoveEntity,this.OnRemoveEntity,this),h.view.on(c.LookAtEntity,this.onLookAt,this)},r.BindEntityData=function(t){this._entityData=t,null!=t&&(this.agentName.string=t.name),this.UpdateUI()},r.update=function(t){Date.now()-this._lastUpdateTime<this._delay||(this._lastUpdateTime=Date.now(),this.UpdateUI())},r.UpdateUI=function(){null!=this._entityData?(this.node.active=!0,this.UpdateProperty(),this.UpdateSkills(),this.UpdateAchievement()):this.node.active=!1},r.UpdateProperty=function(){if(null!=this._entityData.resources)for(var t in this._resourcesMap){var e=this._resourcesMap[t],i=this._entityData.resources.GetResource(t);null!=i?(e.node.active=!0,e.value=""+i.val):e.node.active=!1}},r.UpdateSkills=function(){if(null!=this._entityData.skills)for(var t in this._skillsMap){var e=this._skillsMap[t],i=this._entityData.skills.GetSkill(t);null!=i?(e.node.active=!0,e.value=""+i.level):e.node.active=!1}},r.UpdateAchievement=function(){null==this._entityData.metrics?this.achievement.active=!1:(this.achievement.active=!0,this.exploration.value=""+this._entityData.metrics.Exploration,this.kills.value=""+this._entityData.metrics.PlayerDefeats,this.equipment.value=""+this._entityData.metrics.Equipment,this.foraging.value=""+this._entityData.metrics.Foraging,this.total.string=""+this._entityData.metrics.total)},r.OnRemoveEntity=function(t){t&&t.data==this._entityData&&(this._entityData=null,this.UpdateUI())},r.onLookAt=function(t){null!=t&&null!=t.entity?this.BindEntityData(t.entity.data):this.BindEntityData(null)},e}(p)).prototype,"agentName",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(L.prototype,"health",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(L.prototype,"food",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(L.prototype,"water",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(L.prototype,"melee",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(L.prototype,"defense",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(L.prototype,"range",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(L.prototype,"hunting",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(L.prototype,"mage",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(L.prototype,"fishing",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(L.prototype,"constitution",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(L.prototype,"achievement",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=e(L.prototype,"exploration",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(L.prototype,"kills",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=e(L.prototype,"equipment",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(L.prototype,"foraging",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=e(L.prototype,"total",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=L))||B));r._RF.pop()}}}));

System.register("chunks:///_virtual/Environment.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,o,a,s,l,c,u,p,v;return{setters:[function(e){t=e.defineProperty,r=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,l=e.Size,c=e.Prefab,u=e.SpriteFrame,p=e.Node,v=e.Component}],execute:function(){var f,b,d,y,h,S,m,g,w;e("TileType",void 0),a._RF.push({},"3f341xD/0dN6Kx5pmkAVY3Y","Environment",void 0);var T,z=s.ccclass,F=s.property;!function(e){e[e.Lava=0]="Lava",e[e.Water=1]="Water",e[e.Grass=2]="Grass",e[e.Scrub=3]="Scrub",e[e.Forest=4]="Forest",e[e.Stone=5]="Stone",e[e.Orerock=6]="Orerock"}(T||(T=e("TileType",{})));var L=e("ResourceSize",{});L[T.Scrub]=new l,L[T.Forest]=new l,L[T.Stone]=new l,L[T.Orerock]=new l;e("Tile",(function(e,r,i){t(this,"r",void 0),t(this,"c",void 0),t(this,"val",void 0),this.r=e,this.c=r,this.val=i})),e("Environment",(f=z("Environment"),b=F(c),d=F({group:" TileSprites \n    Lava = 0,\n    Water = 1,\n    Grass = 2,\n    Scrub = 3,\n    Forest = 4,\n    Stone = 5,\n    Orerock = 6",type:[u],visible:!0}),y=F({type:p,visible:!0}),f((m=r((S=function(e){function r(){for(var r,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=e.call.apply(e,[this].concat(a))||this,n(o(r),"tilePrefab",m,o(r)),n(o(r),"tileSprites",g,o(r)),n(o(r),"terrainLayer",w,o(r)),t(o(r),"tileNodes",void 0),t(o(r),"tiles",void 0),r}i(r,e);var a=r.prototype;return a.Init=function(e){},a.GetNode=function(e,t){return this.tileNodes&&this.tileNodes[t+"_"+e]},a.GetTile=function(e,t){return this.tiles&&this.tiles[e+"_"+t]},a.updateInactiveResources=function(e){},a.Clear=function(){},r}(v)).prototype,"tilePrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=r(S.prototype,"tileSprites",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=r(S.prototype,"terrainLayer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=S))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/UITeamOptionData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./DropdownOptionData.ts"],(function(t){"use strict";var i,n,e,a,o;return{setters:[function(t){i=t.inheritsLoose,n=t.defineProperty,e=t.assertThisInitialized},function(t){a=t.cclegacy},function(t){o=t.default}],execute:function(){a._RF.push({},"3ff56U3uslPvKbhHHgZqtvV","UITeamOptionData",void 0);t("UITeamOptionData",function(t){function a(i){var a;return a=t.call(this,i.label,null,i.alwaysBottom)||this,n(e(a),"invalid",!1),i.invalid&&(a.invalid=i.invalid),a}return i(a,t),a}(o));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerResources.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ResourceGroup.ts"],(function(e){"use strict";var o,r,t,s,u;return{setters:[function(e){o=e.inheritsLoose,r=e.defineProperty,t=e.assertThisInitialized},function(e){s=e.cclegacy},function(e){u=e.ResourceGroup}],execute:function(){s._RF.push({},"4ff7fhdGQJJ9oHq/AcvSyyl","PlayerResources",void 0);e("PlayerResources",function(e){function s(){var o;return o=e.call(this)||this,r(t(o),"health",void 0),r(t(o),"food",void 0),r(t(o),"water",void 0),o.health=o.AddResource("health"),o.food=o.AddResource("food"),o.water=o.AddResource("water"),o}return o(s,e),s}(u));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerSkills.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SkillGroup.ts"],(function(i){"use strict";var e,n,l,t,s;return{setters:[function(i){e=i.inheritsLoose,n=i.defineProperty,l=i.assertThisInitialized},function(i){t=i.cclegacy},function(i){s=i.SkillGroup}],execute:function(){t._RF.push({},"51c98ksmGhE+YZKCj3/7SJp","PlayerSkills",void 0);i("PlayerSkills",function(i){function t(){var e;return e=i.call(this)||this,n(l(e),"constitution",void 0),n(l(e),"melee",void 0),n(l(e),"range",void 0),n(l(e),"mage",void 0),n(l(e),"defense",void 0),n(l(e),"fishing",void 0),n(l(e),"hunting",void 0),e.skills={},e.constitution=e.AddSkill("constitution"),e.melee=e.AddSkill("melee"),e.range=e.AddSkill("range"),e.mage=e.AddSkill("mage"),e.defense=e.AddSkill("defense"),e.fishing=e.AddSkill("fishing"),e.hunting=e.AddSkill("hunting"),e}return e(t,i),t}(s));t._RF.pop()}}}));

System.register("chunks:///_virtual/EntityManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Event.ts","./Utils.ts","./EntityView.ts","./NpcData.ts","./PlayerData.ts","./ZIndex.ts","./HeadInfo.ts","./Entity.ts","./ResourcesHelper.ts"],(function(t){"use strict";var e,n,i,s,a,r,o,h,p,c,l,y,u,d,f;return{setters:[function(t){e=t.defineProperty},function(t){n=t.cclegacy,i=t.instantiate,s=t.math},function(t){a=t.EventManager,r=t.BattleEvent},function(t){o=t.Utils},function(t){h=t.EntityView},function(t){p=t.NpcData},function(t){c=t.PlayerData},function(t){l=t.ZIndex},function(t){y=t.HeadInfo},function(t){u=t.EntityType,d=t.Entity},function(t){f=t.ResourcesHelper}],execute:function(){n._RF.push({},"51e0fYY3GVJ+7I4ytRHB+gm","EntityManager",void 0);var m=t("Team",function(){function t(t){e(this,"teamName",void 0),e(this,"skins",void 0),e(this,"color",void 0),e(this,"entities",void 0),this.teamName=t,this.skins=[],this.color="",this.entities=[]}return t.prototype.addEntity=function(t){this.entities.push(t)},t}()),v=t("EntityManager",function(){function t(){e(this,"players",void 0),e(this,"npcs",void 0),e(this,"headInfoLayer",void 0),e(this,"entityLayer",void 0),e(this,"characterPrefab",void 0),e(this,"headPrefab",void 0),e(this,"playerSkinsTemp",void 0),e(this,"npcSkinsTemp",void 0),e(this,"teamMap",void 0),e(this,"teams",void 0)}var n=t.prototype;return n.init=function(e,n,i){this.players={},this.npcs={},this.teamMap={},this.teams=[],this.playerSkinsTemp=[].concat(t.PAWNS_IDS),this.npcSkinsTemp=[].concat(t.NPC_SKIN_IDS),this.entityLayer=e.entityLayer,this.headInfoLayer=e.headInfoLayer,this.characterPrefab=n,this.headPrefab=i},n.executePacket=function(t,e){this.UpdatePlayers(t),this.UpdateNpcs(t),this.updateZindex()},n.updateZindex=function(){this.entityLayer.children.sort((function(t,e){var n=t.getComponent(l),i=e.getComponent(l);return null==n||null==i?-1:n.compare(i)}))},n.CreateEntity=function(e,n,o){var l;switch(o){case u.None:l=null;break;case u.NPC:var v=new p(n),S=i(this.characterPrefab);S.setParent(this.entityLayer);var P=S.getComponent(h),k=i(this.headPrefab);k.setParent(this.headInfoLayer),k.getComponent(y).entityType=o,(l=new d).data=v,l.type=o,l.view=P,l.selectable=!1,l.headInfo=k.getComponent(y),l.headInfo.setFollow(l.view),null!=this.npcs[e]&&console.log(e),this.npcs[e]=l,0==this.npcSkinsTemp.length&&(this.npcSkinsTemp=[].concat(t.NPC_SKIN_IDS));var I=s.randomRangeInt(0,this.npcSkinsTemp.length),g=this.npcSkinsTemp.splice(I,1)[0];l.setSkins(f.GetSkins(g,o)),l.setNameColor(f.GetColorBySkinID(g,o)),l.start();break;case u.Player:var N=new c(n),C=i(this.characterPrefab);C.setParent(this.entityLayer);var E=C.getComponent(h),T=i(this.headPrefab);T.setParent(this.headInfoLayer),T.getComponent(y).entityType=o,(l=new d).data=N,l.type=o,l.view=E,l.headInfo=T.getComponent(y),l.selectable=!0,l.headInfo.setFollow(l.view),this.players[e]=l;var w=l.teamName,b=this.teamMap[w];if(null==this.teamMap[w]){b=new m(w),this.teams.push(w),0==this.playerSkinsTemp.length&&(this.playerSkinsTemp=[].concat(t.PAWNS_IDS));var D=s.randomRangeInt(0,this.playerSkinsTemp.length),L=this.playerSkinsTemp.splice(D,1)[0];b.color=f.GetColorBySkinID(L,o),b.skins=f.GetSkins(L,o),l.setSkins(b.skins),l.setNameColor(b.color),b.addEntity(l),this.teamMap[w]=b,a.view.emit(r.AddTeam,w)}else l.setSkins(b.skins),l.setNameColor(b.color),b.addEntity(l);l.start()}return l},n.UpdatePlayers=function(t){for(var e in t.player){var n=t.player[e];null==this.players[e]?this.players[e]=this.CreateEntity(e,n,u.Player):this.players[e].update(n)}var i=[];for(var s in this.players)null==t.player[s]&&i.push(s);for(var a=0;a<i.length;a++){var r=i[a];0==this.players[r].removed&&(this.players[r].update(o.GetPlayerLastData(r)),this.players[r]&&this.players[r].removeView())}},n.UpdateNpcs=function(t){for(var e in t.npc){var n=t.npc[e];null==this.npcs[e]?this.npcs[e]=this.CreateEntity(e,n,u.NPC):this.npcs[e].update(n)}var i=[];for(var s in this.npcs)null==t.npc[s]&&i.push(s);for(var a=0;a<i.length;a++){var r=i[a];this.npcs[r]&&this.npcs[r].removeView()}},n.GetPlayersByTeam=function(t){return this.teamMap[t]&&this.teamMap[t].entities},n.GetEntityByKey=function(t){return this.players[t]?this.players[t]:this.npcs[t]?this.npcs[t]:null},t}());e(v,"NPC_SKIN_IDS",[1,2]),e(v,"PAWNS_IDS",[1,2,3,4,6,7,8,9,10,11,12,13,14,15,16]),e(v,"instance",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/Status.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts"],(function(e){"use strict";var t,n,r,i,o;return{setters:[function(e){t=e.inheritsLoose,n=e.defineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy},function(e){o=e.Component}],execute:function(){i._RF.push({},"55534ls3Y9L/IsimZ8yiRoI","Status",void 0);e("Status",function(e){function i(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(r(t),"freeze",void 0),t}return t(i,e),i.prototype.Update=function(e){null!=e.freeze&&(this.freeze=e.freeze)},i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/NpcData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./NPCResources.ts","./LoadoutGroup.ts","./Status.ts","./EntityData.ts","./History.ts","./NpcSKills.ts"],(function(t){"use strict";var n,s,u,o,e,i,c,a;return{setters:[function(t){n=t.inheritsLoose},function(t){s=t.cclegacy},function(t){u=t.NPCResources},function(t){o=t.LoadoutGroup},function(t){e=t.Status},function(t){i=t.EntityData},function(t){c=t.History},function(t){a=t.NpcSkills}],execute:function(){s._RF.push({},"61e4bM93u9MUrAYltPa+dXY","NpcData",void 0);t("NpcData",function(t){function s(n){var s;return(s=t.call(this)||this).status=new e,s.skills=new a,s.resources=new u,s.loadout=new o,s.history=new c,s.UpdateEntityData(n),s}return n(s,t),s}(i));s._RF.pop()}}}));

System.register("chunks:///_virtual/UITeamScroll.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Event.ts","./EntityManager.ts","./UITeamOptionData.ts","./Dropdown.ts","./UITeamAgent.ts"],(function(e){"use strict";var t,i,n,a,r,o,s,l,c,d,m,h,u,f,y,p,v,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.defineProperty},function(e){o=e.cclegacy,s=e._decorator,l=e.Prefab,c=e.Node,d=e.Toggle,m=e.instantiate,h=e.Component},function(e){u=e.EventManager,f=e.BattleEvent},function(e){y=e.EntityManager},function(e){p=e.UITeamOptionData},function(e){v=e.Dropdown},function(e){g=e.UITeamAgent}],execute:function(){var I,T,b,w,E,S,D,O,C;o._RF.push({},"661b8IN1jRH4os+e9nJ4yfq","UITeamScroll",void 0);var A=s.ccclass,U=s.property;e("UITeamScroll",(I=A("UITeamScroll"),T=U(l),b=U(c),w=U(v),I((D=t((S=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(a(t),"itemPrefab",D,a(t)),n(a(t),"agentContent",O,a(t)),n(a(t),"teamDropdown",C,a(t)),r(a(t),"teams",void 0),r(a(t),"items",void 0),r(a(t),"curTeam",void 0),r(a(t),"curItem",void 0),r(a(t),"selectedIndex",-1),t}i(t,e);var o=t.prototype;return o.start=function(){this.items=[],this.teams=[];var e=new p({label:"Clear",invalid:!0,alwaysBottom:!0});this.teamDropdown.addOptionDatas([e],!1),u.view.on(f.AddTeam,this.AddTeam,this),u.view.on(f.RemoveEntity,this.OnRemoveEntity,this),u.view.on(f.SelectedEntity,this.OnSelectedEntity,this)},o.bindTeam=function(e,t){this.curTeam=e,this.selectedIndex=-1;for(var i=0;i<this.items.length;i++){var n=this.items[i];n.entity&&(n.entity.teamSelected=!1),n.entity&&(n.entity.selected=!1),n.node.off(d.EventType.TOGGLE,this.onAgentSelected,this),n.node.destroy()}if(this.items=[],null!=e){var a=y.instance.GetPlayersByTeam(e);this.selectedIndex=-1,this.curItem=null;for(var r=0;r<a.length;r++){var o=a[r],s=m(this.itemPrefab),l=s.getComponent(g);this.items.push(l),l.BindEntity(o),l.node.on(d.EventType.TOGGLE,this.onAgentSelected,this),this.agentContent.addChild(s)}}this.UpdateSelected()},o.UpdateSelected=function(){var e={entity:null!=this.curItem&&null!=this.curItem.entity&&this.curItem.entity,focus:!0};u.view.emit(f.LookAtEntity,e);var t=y.instance.GetPlayersByTeam(this.curTeam);if(null!=t&&0!=t.length)for(var i=0;i<t.length;i++)t[i].teamSelected=!0,t[i].selected=this.curItem&&this.curItem.entity==t[i]},o.AddTeam=function(e){if(-1==this.teams.indexOf(e)){this.teams.push(e);var t=new p({label:e});this.teamDropdown.addOptionDatas([t])}},o.OnTeamDropChanged=function(e){e.invalid?this.bindTeam(void 0):this.bindTeam(e.label)},o.onAgentSelected=function(e){var t=e.node.parent;null!=this.curItem&&this.curItem.node!=t&&(this.curItem.toggle&&(this.curItem.toggle.isChecked=!1),this.curItem=null);for(var i=0;i<t.children.length;i++)if(t.children[i]==e.node){this.curItem=e.node.getComponent(g),this.selectedIndex=i-1;break}this.UpdateSelected()},o.OnRemoveEntity=function(e){null!=e&&null!=this.curItem&&this.curItem.entity==e&&this.bindTeam(this.curTeam)},o.OnSelectedEntity=function(e){var t=e.teamName,i=y.instance.GetPlayersByTeam(t);this.bindTeam(t,i.indexOf(e)),null!=this.curItem&&this.curItem.entity!=e&&(this.curItem.toggle.isChecked=!1);for(var n=0;n<this.items.length;n++){var a=this.items[n];if(a.entity==e){a.toggle.isChecked=!0,this.selectedIndex=n;break}}u.view.emit(f.LookAtEntity,{entity:e,focus:!1})},t}(h)).prototype,"itemPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(S.prototype,"agentContent",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(S.prototype,"teamDropdown",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=S))||E));o._RF.pop()}}}));

System.register("chunks:///_virtual/Environment25D.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts","./Utils.ts","./ZIndex.ts","./Environment.ts","./ResourceView.ts"],(function(e){"use strict";var t,i,r,n,s,o,a,u,l,c,p,h,f,v,S,b,m,d,g,y,R;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,s=e.defineProperty},function(e){o=e.cclegacy,a=e._decorator,u=e.Node,l=e.Prefab,c=e.SpriteFrame,p=e.Size,h=e.instantiate,f=e.Sprite,v=e.math},function(e){S=e.GlobalConfig},function(e){b=e.Utils},function(e){m=e.ZIndex},function(e){d=e.TileType,g=e.Tile,y=e.Environment},function(e){R=e.ResourceView}],execute:function(){var z,x,I,P,w,_,E,T,D,L,C,M,Z,F,G;o._RF.push({},"66240hoUGNMToxJPQV6vBjh","Environment25D",void 0);var N=a.ccclass,O=a.property;e("Environment25D",(z=N("Environment25D"),x=O(u),I=O(u),P=O([l]),w=O([c]),_=O([c]),E=O([c]),z((L=t((D=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(n(t),"entityLayer",L,n(t)),r(n(t),"treeLayer",C,n(t)),r(n(t),"resourcePrefabs",M,n(t)),r(n(t),"scrubSprites",Z,n(t)),r(n(t),"treeSprites",F,n(t)),r(n(t),"stoneSprites",G,n(t)),s(n(t),"resources",void 0),s(n(t),"inactiveResources",void 0),s(n(t),"posZIndexMap",void 0),t}i(t,e);var o=t.prototype;return o.start=function(){},o.Init=function(e){this.tileNodes={},this.tiles={},this.resources={},this.inactiveResources={},S.PosZIndexMap={},S.TilePixelSize=S.TILE_SIZE_25D;var t=e.map,i=t.length;S.MapSize=i,S.RhombusSize=new p(S.TilePixelSize.x,Math.round(S.TilePixelSize.x*Math.sin(S.RADIAN))),S.HRhombusSize=new p(S.RhombusSize.x/2,S.RhombusSize.y/2),S.MapPixelSize=new p(i*S.HRhombusSize.x*2,i*S.HRhombusSize.y*2),S.RealMapPixelSize=new p((i-2*S.BORDER_SIZE)*S.RhombusSize.x,(i-2*S.BORDER_SIZE)*S.RhombusSize.y);var r=S.Scales[S.ScaleIndex];S.CurScale=r,S.LastScale=r;for(var n=0;n<i;n++)for(var s=0;s<i;s++){var o=n+"_"+s,a=t[n][s];if(a!=d.Lava){this.tiles[o]=new g(n,s,a);var u=h(this.tilePrefab);if(u.name="tile_"+o,this.tileNodes[n+"_"+s]=u,u.getComponentInChildren(f).spriteFrame=this.tileSprites[a],u.position=b.GetTilePos(n,s),this.terrainLayer.addChild(u),a>d.Grass){var l=h(this.resourcePrefabs[a]),c=l.getComponent(R),v=l.getComponent(m);v.r=n,v.c=s;var y=this.GetSpriteFrames(a);c.activeSprite=y[0],c.inactiveSprite=y.length>=2&&y[1],l.position=b.RCToTileOrigin(n,s),this.resources[o]=c,l.setParent(this.entityLayer),S.PosZIndexMap[n+"_"+s]={type:a,value:l.getSiblingIndex()}}}}},o.GetSpriteFrames=function(e){switch(e){case d.Scrub:var t=v.randomRangeInt(0,this.scrubSprites.length);return[this.scrubSprites[t]];case d.Forest:var i=v.randomRangeInt(0,this.treeSprites.length);return[this.treeSprites[i],this.scrubSprites[i]];case d.Stone:case d.Orerock:return[this.stoneSprites[v.randomRangeInt(0,this.stoneSprites.length)]]}return null},o.updateInactiveResources=function(e){var t=[];if(null!=e)for(var i=0;i<e.length;i++)t.push(e[i][0]+"_"+e[i][1]);var r=[];for(var n in this.inactiveResources)-1==t.indexOf(n)&&r.push(n);for(var s=0;s<r.length;s++)this.inactiveResources[r[s]].active=!0,delete this.inactiveResources[r[s]];for(var o=0;o<t.length;o++){var a=t[o];null!=this.resources[t[o]]&&(this.resources[t[o]].active=!1,this.inactiveResources[a]=this.resources[t[o]])}},o.Clear=function(){},t}(y)).prototype,"entityLayer",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(D.prototype,"treeLayer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(D.prototype,"resourcePrefabs",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=t(D.prototype,"scrubSprites",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=t(D.prototype,"treeSprites",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=t(D.prototype,"stoneSprites",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=D))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/UITeamAgent.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Entity.ts"],(function(e){"use strict";var t,i,a,r,s,n,o,l,d,h,c,p,u,g,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.defineProperty,r=e.assertThisInitialized,s=e.initializerDefineProperty,n=e.createClass},function(e){o=e.cclegacy,l=e._decorator,d=e.Label,h=e.Node,c=e.ProgressBar,p=e.Toggle,u=e.Sprite,g=e.Component},function(e){b=e.EntityType}],execute:function(){var f,y,B,v,w,P,m,U,H,T,_,z,I,k,D,A,L;o._RF.push({},"6787dOiB/NAQrtoHnG1pKVw","UITeamAgent",void 0);var C=l.ccclass,M=l.property;e("UITeamAgent",(f=C("UITeamAgent"),y=M(d),B=M(h),v=M(c),w=M(c),P=M(c),m=M(p),U=M(u),f((_=t((T=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(r(t),"index",void 0),s(r(t),"nameLabel",_,r(t)),s(r(t),"selectedView",z,r(t)),s(r(t),"HPBar",I,r(t)),s(r(t),"foodBar",k,r(t)),s(r(t),"waterBar",D,r(t)),s(r(t),"toggle",A,r(t)),s(r(t),"disableMask",L,r(t)),a(r(t),"_lastUpdateTime",0),a(r(t),"_updateStep",500),a(r(t),"entity",void 0),t}i(t,e);var o=t.prototype;return o.start=function(){},o.BindEntity=function(e){if(this.entity=e,null==this.entity)this.node.active=!1;else if(this.node.active=!0,this.nameLabel.string=""+this.entity.data.entID,this.toggle.interactable=!this.disable,this.toggle.isChecked=!1,e.type==b.NPC){var t=this.entity.data.resources;this.HPBar.node.active=!0,this.HPBar.progress=this.disable?0:t.health.Percentage,this.foodBar.node.active=!1,this.waterBar.node.active=!1}else if(e.type==b.Player){var i=this.entity.data.resources;this.HPBar.node.active=!0,this.HPBar.progress=this.disable?0:i.health.Percentage,this.foodBar.node.active=!0,this.foodBar.progress=this.disable?0:i.food.Percentage,this.waterBar.node.active=!0,this.waterBar.progress=this.disable?0:i.water.Percentage}},o.UpdateData=function(){null==this.entity&&(this.node.active=!1)},o.update=function(e){this.UpdateUI()},o.UpdateUI=function(){if(this.disableMask.node.active=this.disable,this.toggle.interactable=!this.disable,this.disable&&(this.toggle.isChecked=!1),this.disable&&(this.HPBar.progress=0,this.foodBar.progress=0,this.waterBar.progress=0),!(this.disable||Date.now()-this._lastUpdateTime<this._updateStep)){this._lastUpdateTime=Date.now();var e=this.entity.data.resources;this.HPBar.node.active=!0,this.HPBar.progress=this.disable?0:e.health.Percentage,e.food&&(this.foodBar.progress=this.disable?0:e.food.Percentage),e.water&&(this.waterBar.progress=this.disable?0:e.water.Percentage)}},n(t,[{key:"disable",get:function(){return null==this.entity||this.entity.removed||!this.entity.data.alive}}]),t}(g)).prototype,"nameLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(T.prototype,"selectedView",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(T.prototype,"HPBar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(T.prototype,"foodBar",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(T.prototype,"waterBar",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(T.prototype,"toggle",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),L=t(T.prototype,"disableMask",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=T))||H));o._RF.pop()}}}));

System.register("chunks:///_virtual/Map25D.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,n,o,r,s,a,h,l,u,c,p,f,y,M,z,d,I;return{setters:[function(t){i=t.defineProperty,e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,h=t.Size,l=t.Prefab,u=t.Node,c=t.CCFloat,p=t.CCBoolean,f=t.math,y=t.instantiate,M=t.Label,z=t.Vec3,d=t.UITransform,I=t.Component}],execute:function(){var b,x,v,T,m,g,S,P,w,C,D,R,L,X,Y,_,E,G,H,U,N,O,W,A,F,B,j;s._RF.push({},"68704RlcbFBQ5UOCP9I/oin","Map25D",void 0);var k=a.ccclass,Q=a.property;t("Map25D",(b=k("Map25D"),x=Q(h),v=Q(h),T=Q(l),m=Q(u),g=Q({type:c}),S=Q(p),P=Q(p),w=Q(c),C=Q(c),D=Q(c),R=Q(c),b((j=B=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i=t.call.apply(t,[this].concat(n))||this,o(r(i),"size",Y,r(i)),o(r(i),"tileSize",_,r(i)),o(r(i),"tilePrefab",E,r(i)),o(r(i),"mapLayer",G,r(i)),o(r(i),"angle",H,r(i)),o(r(i),"useMat",U,r(i)),o(r(i),"useIsoMap",N,r(i)),o(r(i),"IsoX",O,r(i)),o(r(i),"IsoY",W,r(i)),o(r(i),"IsoW",A,r(i)),o(r(i),"IsoH",F,r(i)),i}n(i,t);var e=i.prototype;return e.start=function(){this.useIsoMap?this.InitIsoMap():this.initMap()},e.initMap=function(){if(0==this.useMat)for(var t=0;t<this.size.x;t++)for(var i=0;i<this.size.y;i++){var e=this.GetPos25D(t,i),n=y(this.tilePrefab);n.position=e;var o=this.GetTilePos(t,i);n.getComponentInChildren(M).string="("+t+","+i+") ("+Math.round(o.x)+","+Math.round(o.y)+")",this.mapLayer.addChild(n)}else for(var r=0;r<=this.size.x;r++)for(var s=0;s<=this.size.y;s++){var a=this.tileSize.height/2/Math.sin(60*Math.PI/180);console.log(this.tileSize,a);var h=(r-this.size.x/2)*a,l=(s-this.size.y/2)*a,c=new z(h,l,0);c=this.GetMatPos(c);var p=y(this.tilePrefab);p.position=c;var f=this.GetTilePos(r,s);p.getComponentInChildren(M).string="("+r+","+s+") ("+Math.round(f.x)+","+Math.round(f.y)+")",this.mapLayer.addChild(p)}this.node.on(u.EventType.TOUCH_END,this.onTouch,this),this.node.on(u.EventType.MOUSE_UP,this.onTouch,this)},e.InitIsoMap=function(){for(var t=0;t<this.size.x;t++)for(var i=0;i<this.size.y;i++){var e=this.IsoToScreenX(t,i),n=this.IsoToScreenY(t,i);console.log("(r,c)= ("+t+","+i+"), IsoToScreen=("+e+","+n+")");var o=new z(e,n,0),r=y(this.tilePrefab);r.position=o;var s=this.GetTilePos(t,i);r.getComponentInChildren(M).string="("+t+","+i+") ("+Math.round(s.x)+","+Math.round(s.y)+")",this.mapLayer.addChild(r)}this.node.on(u.EventType.TOUCH_END,this.onTouch,this),this.node.on(u.EventType.MOUSE_UP,this.onTouch,this)},e.tileToPos2D=function(t,i){var e=(t-this.size.x/2)*this.tileSize.width+this.tileSize.width/2,n=(i-this.size.y/2)*this.tileSize.height+this.tileSize.height/2;return new z(e,n,0)},e.onTouch=function(t){var i=t.getLocation(),e=new z(i.x,i.y,0),n=this.node.getComponent(d).convertToNodeSpaceAR(e),o=new z(this.ScreenToIsoX(n.x,n.y),this.ScreenToIsoY(n.x,n.y));console.log(" scrernToPos = ("+Math.round(o.x)+","+Math.round(o.y)+" )")},e.GetPos25D=function(t,i){var e=this.tileSize.x/2,n=e*Math.sin(f.toRadian(this.angle)),o=-e*t+i*e,r=(this.size.x-t-i)*n-this.tileSize.y/2;return new z(o,r,r)},e.PosToTile=function(t){return new z((t.x-t.y)/256/2,.5*(t.x+t.y)/64,0)},e.rotateMatrix=function(t){var i=f.toRadian(45),e=[Math.cos(i),-Math.sin(i),Math.sin(i),Math.cos(i)];return this.matrix2d(t,e)},e.GetMatPos=function(t){var i=f.toRadian(45),e=[Math.cos(i),-Math.sin(i),Math.sin(i),Math.cos(i)],n=[1,0,0,1];return this.matrix2d(this.matrix2d(t,e),n)},e.applyMatrix=function(t){var i=45*Math.PI/180,e=[Math.cos(i),-Math.sin(i),Math.sin(i),Math.cos(i)],n=[1,0,0,60/90];return this.matrix2d(this.matrix2d(t,e),n)},e.matrix2d=function(t,i){var e=t.x*i[0]+t.y*i[1],n=t.x*i[2]+t.y*i[3];return new z(e,n,t.z)},e.GetTilePos=function(t,i){var e=this.tileSize.x/2,n=e*Math.sin(f.toRadian(this.angle)),o=-e*t+i*e,r=(this.size.x-t-i)*n-n;return new z(o,r,r)},e.PosToTile2D=function(t){t.x=t.x+this.tileSize.x/2,t.y=t.y+this.tileSize.y/2;var i=Math.floor(t.x/this.tileSize.x)+this.size.x/2,e=Math.floor(t.y/this.tileSize.y)+this.size.y/2;return i=Math.max(0,Math.min(this.size.x-1,i)),e=Math.max(0,Math.min(this.size.y-1,e)),new z(i,e,0)},e.PosToTile25D=function(t){},e.IsoToScreenX=function(t,i){return this.IsoX+(t-i)*this.IsoW},e.IsoToScreenY=function(t,i){return this.IsoY+(t+i)*this.IsoH},e.ScreenToIsoX=function(t,i){return((i-this.IsoY)/this.IsoW-(t-this.IsoX)/this.IsoH)/2},e.ScreenToIsoY=function(t,i){return((i-this.IsoY)/this.IsoH-(t-this.IsoX)/this.IsoW)/2},i}(I),i(B,"RADIAN",f.toRadian(45)),Y=e((X=j).prototype,"size",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),_=e(X.prototype,"tileSize",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),E=e(X.prototype,"tilePrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(X.prototype,"mapLayer",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(X.prototype,"angle",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=e(X.prototype,"useMat",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=e(X.prototype,"useIsoMap",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=e(X.prototype,"IsoX",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=e(X.prototype,"IsoY",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=e(X.prototype,"IsoW",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=e(X.prototype,"IsoH",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=X))||L));s._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc","./GlobalConfig.ts"],(function(e){"use strict";var i,a,l,t,n;return{setters:[function(e){i=e.cclegacy,a=e.math,l=e.Vec3,t=e.Vec2},function(e){n=e.GlobalConfig}],execute:function(){i._RF.push({},"6bda3RPMxpAv4yr0i8Gl9ym","Utils",void 0);e("Utils",function(){function e(){}return e.GetPlayerLastData=function(e){if(null==n.LastDataMap[e]&&null!=n.replay&&null!=n.replay.packets)for(var i=n.replay.packets,a=i.length-1;a>0;a--)if(null!=i[a].player[e]){n.LastDataMap[e]=i[a].player[e];break}return n.LastDataMap[e]},e.GetDragPos=function(e){var i=n.RealMapPixelSize.x*n.CurScale/2,t=n.RealMapPixelSize.y*n.CurScale/2,r=a.clamp(e.x,-i,i),u=a.clamp(e.y,-t,t);return new l(r,u)},e.GetTilePos=function(e,i){if(n.Use25D){var a=n.HRhombusSize.width,t=n.HRhombusSize.height,r=-a*e+i*a,u=(n.MapSize-e-i)*t-n.TilePixelSize.y/2;return new l(r,u,u)}var o=(e-n.MapSize/2)*n.TilePixelSize.x,S=(i-n.MapSize/2)*n.TilePixelSize.y;return new l(o,S,S)},e.RCToTileOrigin=function(e,i){if(n.Use25D){var a=n.HRhombusSize.width,t=n.HRhombusSize.height,r=-a*e+i*a,u=(n.MapSize-e-i)*t-t;return new l(r,u,u)}var o=(e-n.MapSize/2)*n.TilePixelSize.x,S=(i-n.MapSize/2)*n.TilePixelSize.y;return new l(o,S,S)},e.PosToTile=function(e){e.x,n.TilePixelSize.x,n.MapSize,e.y,n.TilePixelSize.y,n.MapSize;return t.ZERO},e.PosToTile2D=function(e){e.x=e.x+n.TilePixelSize.x/2,e.y=e.y+n.TilePixelSize.y/2;var i=Math.floor(e.x/n.TilePixelSize.x)+n.MapSize/2,a=Math.floor(e.y/n.TilePixelSize.y)+n.MapSize/2;return i=Math.max(0,Math.min(n.MapSize-1,i)),a=Math.max(0,Math.min(n.MapSize-1,a)),new t(i,a)},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Event.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i;return{setters:[function(e){t=e.defineProperty},function(e){n=e.cclegacy,i=e.EventTarget}],execute:function(){n._RF.push({},"74dc8LVEcZO5Jxp5pGRPly9","Event",void 0);var c=e("BattleEvent",(function(){}));t(c,"SelectedEntity","SelectedEntity"),t(c,"SelectedTile","SelectedTile"),t(c,"AddTeam","AddTeam"),t(c,"RemoveTeam","RemoveTeam"),t(c,"LookAtEntity","LookAtEntity"),t(c,"RemoveEntity","RemoveEntity"),t(c,"AddEntity","AddEntity"),t(c,"SelectedTeam","SelectedTeam");var l=e("EventManager",function(){function e(){}return e.Init=function(){null==this.view&&(this.view=new i),null==this.battle&&(this.battle=new i)},e}());t(l,"view",new i),t(l,"battle",new i),n._RF.pop()}}}));

System.register("chunks:///_virtual/HeadInfo.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts","./DamegManager.ts","./Entity.ts"],(function(e){"use strict";var t,a,i,l,o,n,s,r,c,d,h,u,f,m,b,p,w,g,v,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized,o=e.defineProperty,n=e.createClass},function(e){s=e.cclegacy,r=e._decorator,c=e.Node,d=e.ProgressBar,h=e.Label,u=e.LabelOutline,f=e.Sprite,m=e.Color,b=e.Vec3,p=e.UITransform,w=e.Component},function(e){g=e.GlobalConfig},function(e){v=e.DamgeManager},function(e){y=e.EntityType}],execute:function(){var S,T,B,L,_,C,H,I,O,P,U,N,x,A,z,D,F,G,k,V,R,E,M;e("HeadVisableStatus",void 0),s._RF.push({},"76d05t3qm5B55OJGYCAVdBM","HeadInfo",void 0);var W,X=r.ccclass,j=r.property;!function(e){e[e.None=0]="None",e[e.TeamFlagOnly=1]="TeamFlagOnly",e[e.NameOnly=2]="NameOnly",e[e.NameAndStatus=3]="NameAndStatus",e[e.All=4]="All"}(W||(W=e("HeadVisableStatus",{})));e("HeadInfo",(S=X("HeadInfo"),T=j(c),B=j(d),L=j(d),_=j(d),C=j(h),H=j(h),I=j(u),O=j(h),P=j(f),U=j(f),S((A=t((x=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(l(t),"bars",A,l(t)),i(l(t),"HPBar",z,l(t)),i(l(t),"foodBar",D,l(t)),i(l(t),"waterBar",F,l(t)),i(l(t),"damageLabel",G,l(t)),i(l(t),"nameLabel",k,l(t)),i(l(t),"nameLabeOutline",V,l(t)),i(l(t),"shortName",R,l(t)),i(l(t),"teamTag",E,l(t)),i(l(t),"selectedFlag",M,l(t)),o(l(t),"damageTw",void 0),o(l(t),"_visableStatus",void 0),o(l(t),"entityType",void 0),o(l(t),"normalOutlineColor",m.BLACK),o(l(t),"selectOutlineColor",m.WHITE),o(l(t),"nameColor",void 0),o(l(t),"follow",void 0),o(l(t),"_lastScarleIndex",0),o(l(t),"_followSelected",!1),o(l(t),"_followTeamSelected",!1),o(l(t),"last",0),t}a(t,e);var s=t.prototype;return s.setFollow=function(e){this.follow=e},s.start=function(){this.entityType!=y.Player&&(this.foodBar.node.active=!1,this.waterBar.node.active=!1),this._lastScarleIndex=g.ScaleIndex,this._followSelected=!(!this.follow||!this.follow.selected),this._followTeamSelected=!(!this.follow||!this.follow.teamSelected),this.node.position=this.GetHeadPos(),this.UpdateActive(),this.nameLabel.color=(new m).fromHEX(this.nameColor)},s.setNameColor=function(e){this.nameColor=e,this.nameLabel&&(this.nameLabel.color=(new m).fromHEX(this.nameColor))},s.update=function(e){0!=this.node.active&&null!=this.follow&&Date.now()-this.last>33.3&&(this.last=Date.now(),this.node.position=this.GetHeadPos(),this.lastScarleIndex=g.ScaleIndex,this.followSelected=!(!this.follow||!this.follow.selected),this.followTeamSelected=!(!this.follow||!this.follow.teamSelected))},s.UpdateActive=function(){this.selectedFlag.node.active=this._followSelected&&0==this._lastScarleIndex,this.teamTag.node.active=!this._followSelected&&this._followTeamSelected&&0==this._lastScarleIndex,this.bars.active=null!=this.follow&&2==this._lastScarleIndex,this.shortName.node.active=null!=this.follow&&this.entityType==y.NPC&&1==this._lastScarleIndex,this.nameLabel.node.active=0==this.shortName.node.active&&null!=this.follow&&this._lastScarleIndex>=1,this.nameLabel.node.active&&(this._followTeamSelected?this.nameLabeOutline.color!=this.selectOutlineColor&&(this.nameLabeOutline.color=this.selectOutlineColor,this.nameLabeOutline.width=3):this.nameLabeOutline.color!=this.normalOutlineColor&&(this.nameLabeOutline.color=this.normalOutlineColor,this.nameLabeOutline.width=1))},s.UpdateUI=function(e){null!=this.node&&0!=this.node.active&&(this.nameLabel.string=e.name,this.shortName.string=this.nameLabel.string[0].toUpperCase(),this.UpdateHPBar(e),this.UpdateFoodBar(e),this.UpdateWaterBar(e),this.UpdateDamage(e))},s.UpdateHPBar=function(e){if(0!=this.bars.active&&this.HPBar.node.active){var t=e.resources.GetResource("health");null!=t?this.HPBar.progress=t.Percentage:this.HPBar.node.active=!1}},s.UpdateFoodBar=function(e){if(0!=this.bars.active&&this.foodBar.node.active){var t=e.resources.GetResource("food");null!=t?this.foodBar.progress=t.Percentage:this.foodBar.node.active=!1}},s.UpdateWaterBar=function(e){if(0!=this.bars.active&&this.waterBar.node.active){var t=e.resources.GetResource("water");null!=t?this.waterBar.progress=t.Percentage:this.waterBar.node.active=!1}},s.UpdateDamage=function(e){0!=this.bars.active&&0!=e.history.damage&&v.instance.showDamge(-e.history.damage,this.node.position,this.follow)},s.Delete=function(){null!=this.damageTw&&(this.damageTw.stop(),this.damageTw=null),this.node&&(this.node.active=!1)},s.GetHeadPos=function(){var e=new b(this.follow.node.worldPosition);return(e=this.node.parent.getComponent(p).convertToNodeSpaceAR(e)).z=0,e.add3f(0,160*g.CurScale,0)},n(t,[{key:"lastScarleIndex",set:function(e){this._lastScarleIndex!=e&&(this._lastScarleIndex=e,this.UpdateActive())}},{key:"followSelected",set:function(e){this._followSelected!=e&&(this._followSelected=e,this.UpdateActive())}},{key:"followTeamSelected",set:function(e){this._followTeamSelected!=e&&(this._followTeamSelected=e,this.UpdateActive())}},{key:"TeamTagVisiable",set:function(e){this.teamTag.node.active!=e&&(this.teamTag.node.active=e)}},{key:"AllHide",get:function(){return!(this.nameLabel.node.active||this.bars.active||this.teamTag.node.active||this.damageLabel.node.active)}},{key:"BarVisable",set:function(e){this.bars.active=e}},{key:"NameVisable",set:function(e){this.nameLabel.node.active=e}}]),t}(w)).prototype,"bars",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(x.prototype,"HPBar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(x.prototype,"foodBar",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(x.prototype,"waterBar",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(x.prototype,"damageLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(x.prototype,"nameLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(x.prototype,"nameLabeOutline",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(x.prototype,"shortName",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(x.prototype,"teamTag",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(x.prototype,"selectedFlag",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=x))||N));s._RF.pop()}}}));

System.register("chunks:///_virtual/ZIndex.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var t,e,i,n,o,c,s,a,p;return{setters:[function(r){t=r.applyDecoratedDescriptor,e=r.inheritsLoose,i=r.defineProperty,n=r.assertThisInitialized,o=r.initializerDefineProperty},function(r){c=r.cclegacy,s=r._decorator,a=r.CCInteger,p=r.Component}],execute:function(){var u,l,y,d,f;c._RF.push({},"79d535wmZZFXKRIL76avPcS","ZIndex",void 0);var h=s.ccclass,v=s.property;r("ZIndex",(u=h("ZIndex"),l=v(a),u((f=t((d=function(r){function t(){for(var t,e=arguments.length,c=new Array(e),s=0;s<e;s++)c[s]=arguments[s];return t=r.call.apply(r,[this].concat(c))||this,i(n(t),"r",void 0),i(n(t),"c",void 0),o(n(t),"priority",f,n(t)),t}e(t,r);var c=t.prototype;return c.start=function(){},c.compare=function(r){return this.r>r.r?1:this.r<r.r?-1:this.r==r.r&&this.c!=r.c?this.c-r.c:this.priority-r.priority},t}(p)).prototype,"priority",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=d))||y));c._RF.pop()}}}));

System.register("chunks:///_virtual/World.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts","./Event.ts","./Utils.ts","./EntityManager.ts","./StatisticalManager.ts","./Environment25D.ts","./Environment2D.ts"],(function(e){"use strict";var t,i,n,a,o,r,l,s,c,u,p,h,d,y,f,v,b,S,g,k,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.defineProperty},function(e){r=e.cclegacy,l=e._decorator,s=e.Node,c=e.Prefab,u=e.CCBoolean,p=e.Vec3,h=e.math,d=e.Component},function(e){y=e.GlobalConfig},function(e){f=e.EventManager,v=e.BattleEvent},function(e){b=e.Utils},function(e){S=e.EntityManager},function(e){g=e.StatisticalManager},function(e){k=e.Environment25D},function(e){m=e.Environment2D}],execute:function(){var L,w,C,D,E,A,P,z,I,N,R,T,x,M,U,O,_,F,H,W,B,G,j;r._RF.push({},"7d325n3E9tHjoMldCTH0dUI","World",void 0);var V=l.ccclass,q=l.property;e("World",(L=V("World"),w=q({type:s,visible:!0}),C=q({type:s,visible:!0}),D=q({type:s,visible:!0}),E=q({type:s,visible:!0}),A=q({type:s,visible:!0}),P=q({type:s,visible:!0}),z=q({type:s,visible:!0}),I=q(c),N=q(c),R=q(u),L((M=t((x=function(e){function t(){var t;return t=e.call(this)||this,n(a(t),"terrainLayer",M,a(t)),n(a(t),"entityLayer",U,a(t)),n(a(t),"touchLayer",O,a(t)),n(a(t),"waterLayer",_,a(t)),n(a(t),"borderLayer",F,a(t)),n(a(t),"treeLayer",H,a(t)),n(a(t),"headInfoLayer",W,a(t)),n(a(t),"characterPrefab",B,a(t)),n(a(t),"headPrefab",G,a(t)),n(a(t),"use25D",j,a(t)),o(a(t),"replayStep",0),o(a(t),"totalStep",0),o(a(t),"lookAtNode",void 0),o(a(t),"packets",void 0),o(a(t),"curEntity",void 0),o(a(t),"env",void 0),o(a(t),"last",0),o(a(t),"isMoving",void 0),S.instance=new S,g.instance=new g,t}i(t,e);var r=t.prototype;return r.start=function(){this.init()},r.init=function(){y.Use25D=this.use25D,y.Use25D?this.env=this.node.getComponent(k):this.env=this.node.getComponent(m),this.parseReplayData(y.replay),this.env.Init(y.replay),this.node.setScale(y.CurScale,y.CurScale,y.CurScale),S.instance.init(this,this.characterPrefab,this.headPrefab),this.InitTouch(),f.Init(),f.view.on(v.LookAtEntity,this.LookAt,this),f.view.on(v.RemoveEntity,this.OnRemoveEntity,this),f.view.on(v.SelectedTeam,this.OnSelectedTeam,this)},r.parseReplayData=function(e){this.packets=e.packets,this.totalStep=this.packets.length,this.replayStep=0},r.LookAt=function(e){this.lookAtNode=null!=e&&e.entity?e.entity.view.node:null,this.UpdateLookAtNode(1)},r.OnRemoveEntity=function(e){this.lookAtNode&&this.lookAtNode==e.view.node&&(this.lookAtNode=null)},r.OnSelectedTeam=function(e){},r.Render=function(){if(null!=this.packets){0==y.Pause&&this.replayStep>=this.packets.length&&(this.replayStep=0);var e=this.packets[this.replayStep];S.instance.executePacket(e,this.replayStep),this.env.updateInactiveResources(e.resource),this.replayStep++,this.replayStep>=this.packets.length&&(y.Pause=!0)}},r.update=function(e){null==this.packets||y.Pause||(Date.now()-this.last>y.TickFrac&&(this.last=Date.now(),this.Render()),this.UpdateLookAtNode(e))},r.UpdateLookAtNode=function(e){if(null!=this.lookAtNode&&this.lookAtNode.active&&this.lookAtNode.position&&y.ScaleIndex>0){var t=new p(-1,-1,1).multiply(this.lookAtNode.position).multiplyScalar(y.CurScale);if(p.distance(this.node.position,t)>2*y.TilePixelSize.x){var i=h.clamp(.3+e/(y.TickFrac/1e3),0,1);this.node.position=p.lerp(this.node.position,this.node.position,t,i),this.node.position=t}}},r.InitTouch=function(){var e=this;this.touchLayer.on(s.EventType.TOUCH_MOVE,(function(t){e.isMoving=!0;var i=t.getDelta();e.node.position=b.GetDragPos(e.node.position.add3f(i.x,i.y,0)),e.LookAt(null)}),this)},r.Reset=function(){},r.UpdateScale=function(e){y.ScaleIndex+=e,y.ScaleIndex=h.clamp(y.ScaleIndex,0,y.Scales.length-1),y.LastScale=y.CurScale,y.CurScale=y.Scales[y.ScaleIndex],this.node.setScale(y.CurScale,y.CurScale,y.CurScale)},r.Resize=function(){var e=this.node.position,t=e.x*(y.CurScale/y.LastScale),i=e.y*(y.CurScale/y.LastScale);this.node.position=new p(t,i,e.z)},t}(d)).prototype,"terrainLayer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(x.prototype,"entityLayer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(x.prototype,"touchLayer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(x.prototype,"waterLayer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(x.prototype,"borderLayer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(x.prototype,"treeLayer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(x.prototype,"headInfoLayer",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(x.prototype,"characterPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(x.prototype,"headPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(x.prototype,"use25D",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),T=x))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/Entity.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts","./Utils.ts","./ZIndex.ts","./EntityManager.ts","./SkillType.ts","./SkillManager.ts"],(function(t){"use strict";var e,i,n,a,s,o,d,c,r,h;return{setters:[function(t){e=t.createClass,i=t.defineProperty},function(t){n=t.cclegacy,a=t.Vec3},function(t){s=t.GlobalConfig},function(t){o=t.Utils},function(t){d=t.ZIndex},function(t){c=t.EntityManager},function(t){r=t.SkillType},function(t){h=t.SkillManager}],execute:function(){var u;t("EntityType",void 0),n._RF.push({},"7ec63E4pHBL4ILxrgV6xruv","Entity",void 0),function(t){t[t.None=0]="None",t[t.NPC=1]="NPC",t[t.Player=2]="Player"}(u||(u=t("EntityType",{})));t("Entity",function(){function t(){i(this,"data",void 0),i(this,"type",void 0),i(this,"view",void 0),i(this,"removed",void 0),i(this,"headInfo",void 0),i(this,"_zindex",void 0),this.removed=!1}var n=t.prototype;return n.setSkins=function(t){this.view.setSkins(t)},n.setNameColor=function(t){this.headInfo.setNameColor(t)},n.start=function(){this.view._moveTarget=o.RCToTileOrigin(this.data.r,this.data.c)},n.update=function(t){this.headInfo.node.active=!0,this.view.node.active=!0,this.data.UpdateEntityData(t),this.headInfo.UpdateUI(this.data),this.view.UpdateView(this.data),this.removed=!1,this.updataAttack(),this.zIndex.r=this.data.r,this.zIndex.c=this.data.c},n.updataAttack=function(){if(this.view.attackEffect.active=this.freeze>0,0!=s.ScaleIndex){var t=this.data.history.attack;if(null!=t&&null!=t.target){var e=c.instance.GetEntityByKey(t.target);if(null!=e){var i=new a(0,50,0).add(this.position),n=new a(0,50,0).add(e.position),o=t.style.toLowerCase();h.instance.showSkill(r[o],i,n,e)}}}},n.onHit=function(t){},n.removeView=function(){this.removed||(this.view.node.active=!1,this.headInfo.node.active=!1,this.removed=!0)},e(t,[{key:"zIndex",get:function(){return null==this._zindex&&(this._zindex=this.view.node.getComponent(d)),this._zindex}},{key:"freeze",get:function(){return this.data&&this.data.status?this.data.status.freeze:0}},{key:"id",get:function(){return this.data.entID}},{key:"teamName",get:function(){return this.data.teamName}},{key:"selectable",set:function(t){this.view.selectable=t,t&&(this.view.selectedNofity=this)}},{key:"position",get:function(){return this.view.node.position}},{key:"teamSelected",set:function(t){this.view.teamSelected=t}},{key:"selected",set:function(t){this.view.selected=t}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/EntityView.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts","./Event.ts","./Utils.ts"],(function(e){"use strict";var t,i,s,n,o,r,a,c,l,h,p,u,d,v,f,_,m,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,s=e.defineProperty,n=e.assertThisInitialized,o=e.initializerDefineProperty,r=e.createClass},function(e){a=e.cclegacy,c=e._decorator,l=e.Sprite,h=e.Node,p=e.math,u=e.Vec3,d=e.UITransform,v=e.Component},function(e){f=e.GlobalConfig},function(e){_=e.EventManager,m=e.BattleEvent},function(e){T=e.Utils}],execute:function(){var g,S,y,k,b,M,I,P,x,E,Z;a._RF.push({},"7f2e3hUQi5AiKqLJfHi+kgn","EntityView",void 0);var C=c.ccclass,U=c.property;e("EntityView",(g=C("EntityView"),S=U(l),y=U(h),k=U(h),b=U(h),g((P=t((I=function(e){function t(){var t;return t=e.call(this)||this,s(n(t),"skins",[]),o(n(t),"skin",P,n(t)),o(n(t),"attackEffect",x,n(t)),o(n(t),"teamSelectedSprite",E,n(t)),o(n(t),"selectedSprite",Z,n(t)),s(n(t),"dir",0),s(n(t),"isDelete",void 0),s(n(t),"_uiTransform",void 0),s(n(t),"_moveTarget",void 0),s(n(t),"selectable",void 0),s(n(t),"selectedNofity",void 0),s(n(t),"_r",void 0),s(n(t),"_c",void 0),t}i(t,e);var a=t.prototype;return a.setSkins=function(e){this.skins=e},a.start=function(){this.skin.spriteFrame=this.skins[this.dir],this.selectable&&this.node.on(h.EventType.TOUCH_END,this.onTouch,this),null!=this._moveTarget&&(this.node.position=this._moveTarget)},a.onTouch=function(){_.view.emit(m.SelectedEntity,this.selectedNofity)},a.UpdateView=function(e){this._moveTarget=T.RCToTileOrigin(e.r,e.c),this._r=e.r,this._c=e.c,e.r!=e.oR||e.c!=e.oC?this._moveTarget=T.RCToTileOrigin(e.r,e.c):this._moveTarget=null,e.oC!=e.c&&this.SetDir(e.c>e.oC?1:0),this.UpdateMove(!0),this.UpdateAttack()},a.update=function(e){0!=this.node.active&&this.UpdateMove(!0,e)},a.UpdateAttack=function(){},a.SetDir=function(e){e!=this.dir&&(this.dir=e,this.skin.spriteFrame=this.skins[this.dir])},a.UpdateMove=function(e,t){if(void 0===e&&(e=!0),void 0===t&&(t=0),null!=this._moveTarget)if(e){var i=p.clamp(.3+t/(f.TickFrac/1e3),0,1);this.node.position=u.lerp(this.node.position,this.node.position,this._moveTarget,i)}else this.node.position=this._moveTarget},a.updatZIndex=function(){var e=NaN,t=this._r+"_"+this._c,i=f.MapSize;f.PosZIndexMap[t]&&(e=f.PosZIndexMap[t].value+i);var s=this._r-1+"_"+this._c;f.PosZIndexMap[s]&&(e=f.PosZIndexMap[s].value+i);var n=this._r-1+"_"+this._c;f.PosZIndexMap[n]&&(e=f.PosZIndexMap[n].value+i);var o=this._r+1+"_"+this._c;f.PosZIndexMap[o]&&(e=f.PosZIndexMap[o].value+i);var r=this._r+"_"+(this._c-1);f.PosZIndexMap[r]&&(e=f.PosZIndexMap[r].value+i);var a=this._r+"_"+(this._c+1);f.PosZIndexMap[a]&&(e=f.PosZIndexMap[a].value+i),NaN!=e&&(this.uiTransform.priority=e)},r(t,[{key:"uiTransform",get:function(){return null==this._uiTransform&&(this._uiTransform=this.node.getComponent(d)),this._uiTransform}},{key:"seletAble",set:function(e){this.selectable&&(this.skin.spriteFrame=this.skins[this.dir],this.node.on(h.EventType.TOUCH_END,this.onTouch,this))}},{key:"teamSelected",get:function(){return this.teamSelectedSprite&&this.teamSelectedSprite.active},set:function(e){this.teamSelectedSprite&&(this.teamSelectedSprite.active=e)}},{key:"selected",get:function(){return this.selectedSprite&&this.selectedSprite.active},set:function(e){this.selectedSprite&&(this.selectedSprite.active=e)}}]),t}(v)).prototype,"skin",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(I.prototype,"attackEffect",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(I.prototype,"teamSelectedSprite",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(I.prototype,"selectedSprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=I))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/EntityData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Metrics.ts"],(function(t){"use strict";var i,s,e;return{setters:[function(t){i=t.defineProperty},function(t){s=t.cclegacy},function(t){e=t.Metrics}],execute:function(){s._RF.push({},"8fdc5w+UkpOzbhT1qWEXlm3","EntityData",void 0);t("EntityData",function(){function t(){i(this,"alive",void 0),i(this,"entID",void 0),i(this,"annID",void 0),i(this,"r",NaN),i(this,"c",NaN),i(this,"name",void 0),i(this,"color",void 0),i(this,"population",void 0),i(this,"self",void 0),i(this,"status",void 0),i(this,"skills",void 0),i(this,"resources",void 0),i(this,"loadout",void 0),i(this,"history",void 0),i(this,"metrics",void 0),i(this,"teamName",void 0),i(this,"oR",void 0),i(this,"oC",void 0)}var s=t.prototype;return s.UpdateEntityData=function(t){null!=t.base&&this.UpdateBase(t.base),this.alive=t.alive,this.annID=t.annID,this.entID=t.entID,this.UpdateSkills(t.skills),this.UpdateStatus(t.status),this.UpdateResources(t.resource),this.UpdateHistory(t.history),this.UpdateMetrics(t.metrics)},s.UpdateStatus=function(t){this.status.Update(t)},s.UpdateSkills=function(t){this.skills.UpdateSkills(t)},s.UpdateResources=function(t){this.resources.UpdateResources(t)},s.UpdateMetrics=function(t){t&&(null==this.metrics&&(this.metrics=new e),this.metrics.bindData(t))},s.UpdateHistory=function(t){this.history.UpdateHistory(t)},s.UpdateBase=function(t){null!=this.r&&NaN!=this.r&&(this.oR=this.r,this.oC=this.c),this.r=t.r,this.c=t.c,this.name=t.name,this.color=t.color,this.population=t.population,this.self=t.self,this.teamName=t.name.split("_")[0]},s.InGrid=function(t,i){return this.c==i&&this.r==t},s.GetPopulation=function(){return this.population},s.GetTeamName=function(){return this.teamName},t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/NpcSKills.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SkillGroup.ts"],(function(e){"use strict";var i,l,t,n,s;return{setters:[function(e){i=e.inheritsLoose,l=e.defineProperty,t=e.assertThisInitialized},function(e){n=e.cclegacy},function(e){s=e.SkillGroup}],execute:function(){n._RF.push({},"914fbzSV/JBiLLsNZH/bA0G","NpcSKills",void 0);e("NpcSkills",function(e){function n(){var i;return i=e.call(this)||this,l(t(i),"constitution",void 0),l(t(i),"melee",void 0),l(t(i),"range",void 0),l(t(i),"mage",void 0),l(t(i),"defense",void 0),i.skills={},i.constitution=i.AddSkill("constitution"),i.melee=i.AddSkill("melee"),i.range=i.AddSkill("range"),i.mage=i.AddSkill("mage"),i.defense=i.AddSkill("defense"),i}return i(n,e),n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIGame.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts","./UIStatisticalData.ts","./UIAgentStatus.ts","./UITeamScroll.ts","./World.ts"],(function(e){"use strict";var t,i,r,a,l,o,n,s,p,u,d,c,h,S,b,f,m,w,y,g,v,z;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,l=e.defineProperty},function(e){o=e.cclegacy,n=e._decorator,s=e.Slider,p=e.UITransform,u=e.CCFloat,d=e.Label,c=e.Sprite,h=e.Node,S=e.SpriteFrame,b=e.math,f=e.Vec3,m=e.Component},function(e){w=e.GlobalConfig},function(e){y=e.UIStatisticalData},function(e){g=e.UIAgentStatus},function(e){v=e.UITeamScroll},function(e){z=e.World}],execute:function(){var P,U,I,F,R,B,L,x,M,G,k,D,T,A,C,_,Z,W,j,H,N,V,q,E,J,K,O,Q,X,Y,$;o._RF.push({},"9608aZ/PPZIGL79oR6+9aWj","UIGame",void 0);var ee=n.ccclass,te=n.property;e("UIGame",(P=ee("UIGame"),U=te(z),I=te(y),F=te(v),R=te(g),B=te(s),L=te(p),x=te(u),M=te(d),G=te(d),k=te(c),D=te(c),T=te(h),A=te(c),C=te([S]),P((W=t((Z=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,r(a(t),"world",W,a(t)),r(a(t),"statisticalPanel",j,a(t)),r(a(t),"teamScroll",H,a(t)),r(a(t),"agentStatus",N,a(t)),r(a(t),"stepSlider",V,a(t)),r(a(t),"sliderBar",q,a(t)),r(a(t),"sliderBarMax",E,a(t)),r(a(t),"stepLabel",J,a(t)),r(a(t),"speedLabel",K,a(t)),r(a(t),"pauseSprite",O,a(t)),r(a(t),"playerSprite",Q,a(t)),r(a(t),"btnSharik",X,a(t)),r(a(t),"hideSp",Y,a(t)),r(a(t),"hideSpriteFrame",$,a(t)),l(a(t),"sharkTween",void 0),l(a(t),"hideAll",void 0),t}i(t,e);var o=t.prototype;return o.start=function(){this.sliderBar.width=Math.floor(this.sliderBarMax*this.stepSlider.progress),this.playerSprite.node.active=w.Pause,this.pauseSprite.node.active=!w.Pause,this.speedLabel.string=w.SpeedRate+"x",this.hideSp.spriteFrame=this.node.active?this.hideSpriteFrame[0]:this.hideSpriteFrame[1]},o.Pause=function(){w.Pause=!w.Pause},o.ZoomUp=function(){this.world.UpdateScale(1),this.world.Resize()},o.ZoomDown=function(){this.world.UpdateScale(-1),this.world.Resize()},o.update=function(){this.stepLabel.string="Turn "+this.world.replayStep,this.playerSprite.node.active=w.Pause,this.pauseSprite.node.active=!w.Pause,this.stepSlider.progress=this.world.replayStep/this.world.totalStep,this.sliderBar.width=Math.floor(this.sliderBarMax*this.stepSlider.progress)},o.onStepSlider=function(){this.world.replayStep=Math.floor(this.stepSlider.progress*this.world.totalStep),this.world.replayStep=b.clamp(this.world.replayStep,0,this.world.totalStep-1),this.sliderBar.width=Math.floor(this.sliderBarMax*this.stepSlider.progress),this.world.Render()},o.SharkStatisticalPanel=function(){var e=this.statisticalPanel.node,t=this.btnSharik;if(e.active){var i=e.position.x+647;new f(i,e.position.y,e.position.z);e.active=!1,t.active=!0}else{e.active=!0,t.active=!1;e.position.x}},o.UpdateSpeed=function(){w.SpeedRate>=8?w.SpeedRate=.5:w.SpeedRate=2*w.SpeedRate,this.speedLabel.string=w.SpeedRate+"x"},o.HideAll=function(){this.node.active=!this.node.active,this.hideSp.spriteFrame=this.node.active?this.hideSpriteFrame[0]:this.hideSpriteFrame[1]},t}(m)).prototype,"world",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(Z.prototype,"statisticalPanel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(Z.prototype,"teamScroll",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(Z.prototype,"agentStatus",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(Z.prototype,"stepSlider",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(Z.prototype,"sliderBar",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(Z.prototype,"sliderBarMax",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 616}}),J=t(Z.prototype,"stepLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(Z.prototype,"speedLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(Z.prototype,"pauseSprite",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(Z.prototype,"playerSprite",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(Z.prototype,"btnSharik",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(Z.prototype,"hideSp",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(Z.prototype,"hideSpriteFrame",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=Z))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIDamge.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts"],(function(t){"use strict";var e,n,o,i,r,a,l,s,c,p,u,f,d,h,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.defineProperty},function(t){a=t.cclegacy,l=t._decorator,s=t.Label,c=t.Vec3,p=t.math,u=t.tween,f=t.easing,d=t.UITransform,h=t.Component},function(t){g=t.GlobalConfig}],execute:function(){var m,y,v,w,I;a._RF.push({},"996c7fLXCVA9Z2mJ/jjFQ7k","UIDamge",void 0);var b=l.ccclass,x=l.property;t("UIDamge",(m=b("UIDamge"),y=x(s),m((I=e((w=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a))||this,o(i(e),"text",I,i(e)),r(i(e),"follow",void 0),e}n(e,t);var a=e.prototype;return a.start=function(){var t=new c(p.randomRangeInt(-20,20),50,0).add(this.text.node.position),e=this.node,n=.6/g.SpeedRate;n=p.clamp(n,.1,.6)/2;var o=this;u(this.text.node).delay(g.FlyTime).to(n,{position:t},{easing:f.sineInOut}).to(n,{},{onComplete:function(){e.parent=null,e.destroy(),e=null,o.follow=null}}).start()},a.update=function(t){if(null!=this.follow){var e=new c(this.follow.node.worldPosition);(e=this.node.parent.getComponent(d).convertToNodeSpaceAR(e)).z=0,e.y+=100,this.node.position=e}},a.setText=function(t){this.text.string=t},e}(h)).prototype,"text",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=w))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/DropdownOptionData.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,i,a;return{setters:[function(t){o=t.defineProperty},function(t){i=t.cclegacy,a=t._decorator}],execute:function(){var n;i._RF.push({},"999a1EtwsxMGI6/+fXAnTa3","DropdownOptionData",void 0);var e=a.ccclass;a.property,t("default",e("DropdownOptionData")(n=function(t,i,a){void 0===a&&(a=!1),o(this,"label",""),o(this,"icon",void 0),o(this,"alwaysBottom",!1),this.label=t,this.icon=i,this.alwaysBottom=a})||n);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIAgentStatusItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,l,a,r,n,i,u,s,o,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,n=e.defineProperty,i=e.createClass},function(e){u=e.cclegacy,s=e._decorator,o=e.Label,c=e.Component}],execute:function(){var b,p,f,g,h,v,y;u._RF.push({},"a75f6LPMwtJa5Q0WLIkZrkp","UIAgentStatusItem",void 0);var L=s.ccclass,_=s.property;e("UIAgentStatusItem",(b=L("UIAgentStatusItem"),p=_(o),f=_(o),b((v=t((h=function(e){function t(){for(var t,l=arguments.length,i=new Array(l),u=0;u<l;u++)i[u]=arguments[u];return t=e.call.apply(e,[this].concat(i))||this,a(r(t),"labelLabel",v,r(t)),a(r(t),"valueLabel",y,r(t)),n(r(t),"_label","label"),n(r(t),"_value","0"),t}return l(t,e),t.prototype.start=function(){},i(t,[{key:"label",get:function(){return this._label},set:function(e){this._label=e,this.labelLabel.string=e}},{key:"value",get:function(){return this._value},set:function(e){this._value=e,this.valueLabel.string=e}}]),t}(c)).prototype,"labelLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(h.prototype,"valueLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=h))||g));u._RF.pop()}}}));

System.register("chunks:///_virtual/DamegManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIDamge.ts"],(function(e){"use strict";var t,a,n,r,i,o,s,c,l,u,p;return{setters:[function(e){t=e.defineProperty,a=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,c=e.Prefab,l=e.instantiate,u=e.Component},function(e){p=e.UIDamge}],execute:function(){var g,f,m,d,h,v,y;o._RF.push({},"a83a5SWl3VGJoRqBBnuSSzk","DamegManager",void 0);var D=s.ccclass,b=s.property;e("DamgeManager",(g=D("DamgeManager"),f=b(c),g((y=v=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,r(i(t),"damagePrefab",h,i(t)),t}n(t,e);var a=t.prototype;return a.start=function(){t.instance=this},a.showDamge=function(e,t,a){void 0===a&&(a=null);var n=l(this.damagePrefab);n.position=t,n.getComponent(p).setText(""+e),n.getComponent(p).follow=a,n.setParent(this.node)},t}(u),t(v,"instance",void 0),h=a((d=y).prototype,"damagePrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=d))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/Dropdown.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./DropdownItem.ts","./DropdownOptionData.ts"],(function(e){"use strict";var t,i,n,o,s,r,a,l,h,p,d,c,m,u,f,g,b,v,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,s=e.defineProperty,r=e.createClass,a=e.asyncToGenerator},function(e){l=e.cclegacy,h=e._decorator,p=e.Label,d=e.Node,c=e.Sprite,m=e.EventHandler,u=e.Toggle,f=e.UITransform,g=e.instantiate,b=e.Component},function(e){v=e.default},function(e){w=e.default}],execute:function(){var D,I,y,T,C,_,S,x,L,z,k,O,E,N,P,G,R,U,V;l._RF.push({},"aa78aliDcZOwLVTWED0ZCDj","Dropdown",void 0);var j=h.ccclass,F=h.property;e("Dropdown",(D=j("Dropdown"),I=F(p),y=F(d),T=F(p),C=F(c),_=F(p),S=F(c),x=F(m),L=F([w]),D((O=t((k=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(o(t),"label",O,o(t)),n(o(t),"template",E,o(t)),n(o(t),"labelCaption",N,o(t)),n(o(t),"spriteCaption",P,o(t)),n(o(t),"labelItem",G,o(t)),n(o(t),"spriteItem",R,o(t)),n(o(t),"onChanged",U,o(t)),n(o(t),"options",V,o(t)),s(o(t),"_dropDown",void 0),s(o(t),"validTemplate",!1),s(o(t),"items",[]),s(o(t),"isShow",!1),s(o(t),"_selectedIndex",-1),t}i(t,e);var l=t.prototype;return l.Select=function(e){for(var t=0;t<this.options.length;t++)this.options[t].label==e&&(this.selectedIndex=t)},l.addOptionDatas=function(e,t){var i,n=this;e&&e.forEach((function(e){n.options.push(e)}));for(var o=-1,s=0;s<this.options.length;s++)if(this.options[s].alwaysBottom){i=this.options[s],o=s;break}null!=i&&(this.options.splice(o,1),this.options.push(i))},l.clearOptionDatas=function(){this.options=[],this.refreshShownValue()},l.show=function(){if(this.validTemplate||(this.setUpTemplate(),this.validTemplate)){this.isShow=!0,this._dropDown=this.createDropDownList(this.template),this._dropDown.name="DropDown",this._dropDown.active=!0,this._dropDown.setParent(this.template.parent);var e=this._dropDown.getComponentInChildren(v),t=e.node.parent;e.node.active=!0,this.items=[];for(var i=0,n=this.options.length;i<n;i++){var o=this.options[i],s=this.addItem(o,i==this.selectedIndex,e,this.items);s&&(s.toggle.isChecked=i==this.selectedIndex,s.toggle.node.on(u.EventType.TOGGLE,this.onSelectedItem,this))}e.node.active=!1,t.getComponent(f).height=e.node.getComponent(f).height*this.options.length}},l.addItem=function(e,t,i,n){var o=this.createItem(i);return o.node.setParent(i.node.parent),o.node.active=!0,o.node.name="item_"+(this.items.length+e.label?e.label:""),o.toggle&&(o.toggle.isChecked=!1),o.label&&(o.label.string=e.label),o.sprite&&(o.sprite.spriteFrame=e.icon,o.sprite.enabled=null!=e.icon),this.items.push(o),o},l.hide=function(){this.isShow=!1,null!=this._dropDown&&this.delayedDestroyDropdownList(.15)},l.delayedDestroyDropdownList=function(){var e=a(regeneratorRuntime.mark((function e(t){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=0,n=this.items.length;i<n;i++)null!=this.items[i]&&this.destroyItem(this.items[i]);this.items=[],null!=this._dropDown&&this.destroyDropDownList(this._dropDown),this._dropDown=void 0;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),l.destroyItem=function(e){},l.setUpTemplate=function(){if(this.validTemplate=!1,this.template){this.template.active=!0;var e=this.template.getComponentInChildren(u);if(this.validTemplate=!0,e&&e.node!=this.template?null==this.labelItem||this.labelItem.node.isChildOf(e.node)?null==this.spriteItem||this.spriteItem.node.isChildOf(e.node)||(this.validTemplate=!1,console.error("The dropdown template is not valid. The Item Sprite must be on the item Node or children of it.")):(this.validTemplate=!1,console.error("The dropdown template is not valid. The Item Label must be on the item Node or children of it.")):(this.validTemplate=!1,console.error("The dropdown template is not valid. The template must have a child Node with a Toggle component serving as the item.")),this.validTemplate){var t=e.node.addComponent(v);t.label=this.labelItem,t.sprite=this.spriteItem,t.toggle=e,t.node=e.node,this.template.active=!1,this.validTemplate=!0}else this.template.active=!1}else console.error("The dropdown template is not assigned. The template needs to be assigned and must have a child GameObject with a Toggle component serving as the item")},l.refreshShownValue=function(){if(!(this.options.length<=0)){var e=this.options[this.clamp(this.selectedIndex,0,this.options.length-1)];this.labelCaption&&(e&&""!=e.label&&"Clear"!=e.label?this.labelCaption.string=""+e.label:this.labelCaption.string="Team")}},l.createDropDownList=function(e){return g(e)},l.destroyDropDownList=function(e){e.destroy()},l.createItem=function(e){return g(e.node).getComponent(v)},l.onSelectedItem=function(e){for(var t=e.node.parent,i=0;i<t.children.length;i++)if(t.children[i]==e.node){this.selectedIndex=i-1;break}this.onChanged&&this.onChanged.emit([this.options[this.selectedIndex]]),this.hide()},l.onClick=function(){this.isShow?this.hide():this.show()},l.start=function(){this.template.active=!1,this.node.on(d.EventType.TOUCH_END,this.onClick,this)},l.clamp=function(e,t,i){return e<t?t:e>i?i:e},r(t,[{key:"selectedIndex",get:function(){return this._selectedIndex},set:function(e){this._selectedIndex=e,this.refreshShownValue()}}]),t}(b)).prototype,"label",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(k.prototype,"template",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),N=t(k.prototype,"labelCaption",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),P=t(k.prototype,"spriteCaption",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),G=t(k.prototype,"labelItem",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),R=t(k.prototype,"spriteItem",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),U=t(k.prototype,"onChanged",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),V=t(k.prototype,"options",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=k))||z));l._RF.pop()}}}));

System.register("chunks:///_virtual/ResourcesHelper.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SkillType.ts","./Entity.ts"],(function(e){"use strict";var r,t,a,n,i;return{setters:[function(e){r=e.defineProperty},function(e){t=e.cclegacy,a=e.resources},function(e){n=e.SkillType},function(e){i=e.EntityType}],execute:function(){t._RF.push({},"ab4c45lshJNcbZnLSas1IbF","ResourcesHelper",void 0);var l=e("ResourcesHelper",function(){function e(){}return e.GetNpcSkinByID=function(r){var t=e.NPCPath+"/NPC_"+(r<10?"0"+r:r);return[t+"_a/spriteFrame",t+"_b/spriteFrame"]},e.GetPawnsByID=function(r){var t=e.Pawn+"/pawn_"+(r<10?"0"+r:r);return[t+"_a/spriteFrame",t+"_b/spriteFrame"]},e.GetSkinPathByTeam=function(r,t){switch(t){case i.NPC:return e.GetNpcSkinByID(r);case i.Player:return e.GetPawnsByID(r)}return e.GetPawnsByID(r)},e.GetColorBySkinID=function(r,t){switch(t){case i.NPC:return"#848484";case i.Player:return e.Team_Color[r]}return"#848484"},e.GetSkins=function(r,t){var a=e.GetSkinPathByTeam(r,t);return[e.GetSpriteFrame(a[0]),e.GetSpriteFrame(a[1])]},e.GetSpriteFrame=function(e){return a.get(e)},e.GetSkillsSpriteFrames=function(r,t){var i=[];switch(r){case n.mage:break;case n.melee:if(null==e.SkillSpriteMap[r]&&(e.SkillSpriteMap[r]={}),null==e.SkillSpriteMap[r][t]){e.SkillSpriteMap[r][t]=[];for(var l=1;l<=5;l++){var c=e.SkillRoot+"/melee/"+(1e3*t+l)+"/spriteFrame",s=a.get(c);null!=s?e.SkillSpriteMap[r][t].push(s):console.error("GetSkillsSpriteFrames Error ",c)}}i=e.SkillSpriteMap[r][t];break;case n.range:}return i},e}());r(l,"playerSkins",{}),r(l,"NPC_SKIN_IDS",[1,2]),r(l,"PAWNS_IDS",[1,2,3,4,6,7,8,9,10,11,12,13,14,15,16]),r(l,"character","character/"),r(l,"NPCPath","character/NPC"),r(l,"Pawn","character/Pawn"),r(l,"SkillRoot","skills"),r(l,"Team_Color",{1:"#d0322e",2:"#d02ea3",3:"#372ed0",4:"#2e7ad0",5:"#65d03d",6:"#1c8821",7:"#9d4a23",8:"#974b68",9:"#841332",10:"#4e5e00",11:"#d47880",12:"#d0832e",13:"#bf21ec",14:"#445b7f",15:"#00bfa8",16:"#998cde"}),r(l,"NPC_COLOR",{P:"848484",H:"848484",N:"848484"}),r(l,"SkillSpriteMap",{}),t._RF.pop()}}}));

System.register("chunks:///_virtual/History.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts"],(function(t){"use strict";var e,i,n,o,r;return{setters:[function(t){e=t.inheritsLoose,i=t.defineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy},function(t){r=t.Component}],execute:function(){o._RF.push({},"abbccMZ3fhIuac9+Gr/0l5f","History",void 0);t("Attack",function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(n(e),"target",void 0),i(n(e),"style",void 0),e}return e(o,t),o}(r)),t("History",function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(n(e),"damage",void 0),i(n(e),"timeAlive",void 0),i(n(e),"attack",void 0),e}return e(o,t),o.prototype.UpdateHistory=function(t){this.damage=t.damage,this.timeAlive=t.timeAlive,this.attack=t.attack},o}(r));o._RF.pop()}}}));

System.register("chunks:///_virtual/SkillManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SkillType.ts","./SkillItem.ts","./ResourcesHelper.ts"],(function(e){"use strict";var t,n,o,i,r,a,l,s,c,u,p,g,d,h,m,f,v;return{setters:[function(e){t=e.defineProperty,n=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,s=e.Prefab,c=e.resources,u=e.instantiate,p=e.Vec3,g=e.UITransform,d=e.math,h=e.Component},function(e){m=e.SkillType},function(e){f=e.SkillItem},function(e){v=e.ResourcesHelper}],execute:function(){var y,M,S,k,x,R,w;a._RF.push({},"ace4fHjEsVJ3qQs0M/xAFFx","SkillManager",void 0);var D=l.ccclass,I=l.property;e("SkillManager",(y=D("SkillManager"),M=I(s),y((w=R=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(r(t),"item",x,r(t)),t}o(t,e);var n=t.prototype;return n.start=function(){t.instance=this,c.loadDir(v.SkillRoot),c.loadDir(v.SkillRoot+"/melee")},n.showSkill=function(e,t,n,o){if(void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null),e==m.mage||e==m.melee||e==m.range){var i=u(this.item);i.getComponent(f).Init(e,t,n,o),i.setParent(this.node)}},n.testMelee=function(e){console.log("testMelee");var t=m.melee,n=new p(0,0,0),o=e.getLocation(),i=new p(o.x,o.y,0);i=this.node.getComponent(g).convertToNodeSpaceAR(i);var r=u(this.item);r.getComponent(f).Init(t,n,i,null),r.setParent(this.node)},n.testMage=function(e){var t=m.mage,n=new p(0,0,0),o=e.getLocation(),i=new p(o.x,o.y,0);i=this.node.getComponent(g).convertToNodeSpaceAR(i);var r=Math.atan2(i.y-n.y,i.x-n.x),a=d.toDegree(r);a<0&&(a=360+a),console.log(Math.round(n.x),Math.round(n.y),Math.round(i.x),Math.round(i.y),r,"toDegree "+(a-90));var l=u(this.item);l.getComponent(f).Init(t,n,i,null),l.setParent(this.node)},t}(h),t(R,"instance",void 0),x=n((k=w).prototype,"item",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=k))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/LoadoutGroup.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts"],(function(o){"use strict";var t,n,e,i,r;return{setters:[function(o){t=o.inheritsLoose,n=o.defineProperty,e=o.assertThisInitialized},function(o){i=o.cclegacy},function(o){r=o.Component}],execute:function(){i._RF.push({},"afe7b6XWopOPJg4Rnd0x8kY","LoadoutGroup",void 0);o("Loadout",function(o){function i(){for(var t,i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return t=o.call.apply(o,[this].concat(r))||this,n(e(t),"level",void 0),n(e(t),"color",void 0),t}return t(i,o),i}(r)),o("LoadoutGroup",(function(){n(this,"loadouts",void 0)}));i._RF.pop()}}}));

System.register("chunks:///_virtual/Tile25.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,i,n,o,c;return{setters:[function(t){e=t.inheritsLoose,r=t.defineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,c=t.Component}],execute:function(){var s;n._RF.push({},"affc4ZJ9uhLW7ARVmfKJ1uW","Tile25",void 0);var u=o.ccclass;o.property,t("Tile25",u("Tile25")(s=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o))||this,r(i(e),"r",void 0),r(i(e),"c",void 0),e}return e(n,t),n.prototype.start=function(){},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceGroup.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Component.ts"],(function(e){"use strict";var r,t,s,n,o,u,c;return{setters:[function(e){r=e.inheritsLoose,t=e.createClass,s=e.defineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,u=e.math},function(e){c=e.Component}],execute:function(){o._RF.push({},"b4f9fPXisBNJofsX2nS89D0","ResourceGroup",void 0);var i=e("Resource",function(e){function o(){for(var r,t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];return r=e.call.apply(e,[this].concat(o))||this,s(n(r),"val",void 0),s(n(r),"max",void 0),r}r(o,e);var c=o.prototype;return c.OnEnable=function(){},c.OnDisable=function(){},c.UpdateResource=function(e){this.max=e.max,this.val=e.val},t(o,[{key:"Percentage",get:function(){return u.clamp(this.val/this.max,0,1)}}]),o}(c));e("ResourceGroup",function(e){function t(){var r;return r=e.call(this)||this,s(n(r),"resources",void 0),r.resources={},r}r(t,e);var o=t.prototype;return o.AddResource=function(e){return null==this.resources[e]&&(this.resources[e]=new i),this.resources[e]},o.UpdateResources=function(e){for(var r in e)null==this.resources[r]&&(this.resources[r]=new i),this.resources[r].UpdateResource(e[r])},o.GetResource=function(e){return this.resources&&this.resources[e]},t}(c));o._RF.pop()}}}));

System.register("chunks:///_virtual/SkillItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts","./SkillType.ts","./ResourcesHelper.ts"],(function(t){"use strict";var e,i,s,r,a,n,o,l,h,p,c,u,g,m,d,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.defineProperty},function(t){n=t.cclegacy,o=t._decorator,l=t.Sprite,h=t.SpriteFrame,p=t.tween,c=t.math,u=t.Vec3,g=t.Component},function(t){m=t.GlobalConfig},function(t){d=t.SkillType,f=t.SkillDir},function(t){y=t.ResourcesHelper}],execute:function(){var P,v,S,k,b,D,w,x,R;n._RF.push({},"c2893hp1tRBj55K9AAT+ONc","SkillItem",void 0);var T=o.ccclass,F=o.property;t("SkillItem",(P=T("SkillItem"),v=F(l),S=F(h),k=F(h),P((w=e((D=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,s(r(e),"sprite",w,r(e)),s(r(e),"mage",x,r(e)),s(r(e),"range",R,r(e)),a(r(e),"type",void 0),a(r(e),"startPos",void 0),a(r(e),"tagetPos",void 0),a(r(e),"target",void 0),a(r(e),"angle",NaN),a(r(e),"skins",[]),a(r(e),"index",0),a(r(e),"animSpeed",100),a(r(e),"lastTime",0),a(r(e),"meleeTime",.5),e}i(e,t);var n=e.prototype;return n.Init=function(t,e,i,s){this.type=t,this.startPos=e,this.tagetPos=i,this.target=s,this.node.position=this.startPos},n.start=function(){switch(this.type){case d.mage:this.sprite.spriteFrame=this.mage,this.fly();break;case d.melee:this.melee();break;case d.range:this.sprite.spriteFrame=this.range,this.fly()}},n.melee=function(){var t=this.getDir();this.node.position=this.startPos.add(this.tagetPos.subtract(this.startPos).multiplyScalar(.5)),this.skins=y.GetSkillsSpriteFrames(this.type,t),this.index=0,this.sprite.spriteFrame=this.skins[this.index],this.lastTime=Date.now(),this.index++;var e=this;p(this.node).delay(this.meleeTime/m.SpeedRate).call((function(){e.clear()})).start()},n.update=function(t){this.type==d.melee&&Date.now()-this.lastTime>this.animSpeed/m.SpeedRate&&(this.sprite.spriteFrame=this.skins[this.index],this.lastTime=Date.now(),this.index++,this.index>=this.skins.length&&(this.index=0))},n.fly=function(){var t=Math.atan2(this.tagetPos.y-this.startPos.y,this.tagetPos.x-this.startPos.x),e=c.toDegree(t);e<0&&(e=360+e),this.sprite.node.setRotationFromEuler(new u(0,0,e-90));var i=this;p(this.node).to(m.FlyTime,{position:this.tagetPos},{onComplete:function(){i.clear()}}).start()},n.clear=function(){this.node&&this.node.destroy(),this.target&&this.target.onHit(this.type),this.target=null},n.getDir=function(){var t=Math.atan2(this.tagetPos.y-this.startPos.y,this.tagetPos.x-this.startPos.x),e=c.toDegree(t);return e<22.5&&e>=-22.5?f.Right:e>=22.5&&e<67.5?f.RightUp:e>=67.5&&e<112.5?f.Up:e>=112.5&&e<157.5?f.LeftUp:e>=157.5||e<-157.5?f.Left:e>=-157.5&&e<-112.5?f.LeftDown:e>=-112.5&&e<-67.5?f.Down:e>=-67.5&&e<-22.5?f.RightDown:void 0},e}(g)).prototype,"sprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(D.prototype,"mage",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(D.prototype,"range",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=D))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LoadoutGroup.ts","./Status.ts","./EntityData.ts","./History.ts","./PlayerResources.ts","./PlayerSkills.ts"],(function(t){"use strict";var s,n,e,a,o,u,r,i;return{setters:[function(t){s=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.LoadoutGroup},function(t){a=t.Status},function(t){o=t.EntityData},function(t){u=t.History},function(t){r=t.PlayerResources},function(t){i=t.PlayerSkills}],execute:function(){n._RF.push({},"c4a21/hhXxH15Zw8F1pBlsv","PlayerData",void 0);t("PlayerData",function(t){function n(s){var n;return(n=t.call(this)||this).status=new a,n.skills=new i,n.resources=new r,n.loadout=new e,n.history=new u,n.UpdateEntityData(s),n}return s(n,t),n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/Replay.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"cfda4NS1HNDiaDsCSfdKS0J","Replay",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Environment2D.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GlobalConfig.ts","./Utils.ts","./Environment.ts"],(function(i){"use strict";var e,t,n,r,o,a,l,s,c,h;return{setters:[function(i){e=i.inheritsLoose},function(i){t=i.cclegacy,n=i._decorator,r=i.view,o=i.instantiate,a=i.Sprite},function(i){l=i.GlobalConfig},function(i){s=i.Utils},function(i){c=i.Tile,h=i.Environment}],execute:function(){var u;t._RF.push({},"e2e1aSsUINFoZYqzNa6NtmN","Environment2D",void 0);var p=n.ccclass;n.property,i("Environment2D",p("Environment2D")(u=function(i){function t(){return i.apply(this,arguments)||this}e(t,i);var n=t.prototype;return n.start=function(){},n.Init=function(i){this.tileNodes={},this.tiles={},l.TilePixelSize=l.Use25D?l.TILE_SIZE_25D:l.TILE_SIZE;var e=i.map,t=e.length;l.MapSize=t,l.MapPixelSize.width=t*l.TilePixelSize.width,l.MapPixelSize.height=t*l.TilePixelSize.height;var n=r.getVisibleSize(),h=n.width/l.MapPixelSize.width,u=n.height/l.MapPixelSize.height,p=Math.min(h,u);l.CurScale=p,l.MinScale=.8*l.CurScale,l.ScaleStep=.1*l.CurScale;for(var S=0;S<t;S++)for(var v=0;v<t;v++){var f=S+"_"+v;if(this.tiles[f]=new c(S,v,e[S][v]),0!=e[S][v]){var d=o(this.tilePrefab);d.name="tile_"+f,this.tileNodes[S+"_"+v]=d;var m=d.getComponent(a);m.spriteFrame=this.tileSprites[e[S][v]],m.node.position=s.GetTilePos(S,v),this.terrainLayer.addChild(d)}}},t}(h))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/Packet.ts",["cc"],(function(){"use strict";var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"f37ce2dO19GvIOfnyPVxWs5","Packet",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceView.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,t,r,n,c,o,s,a,p,l;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,c=e.defineProperty,o=e.createClass},function(e){s=e.cclegacy,a=e._decorator,p=e.Sprite,l=e.Component}],execute:function(){var u,v,f,h,d;s._RF.push({},"feb4fXfE6pOlbZEjMqnpBWc","ResourceView",void 0);var y=a.ccclass,S=a.property;e("ResourceView",(u=y("ResourceView"),v=S(p),u((d=i((h=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o))||this,r(n(i),"skin",d,n(i)),c(n(i),"inactiveSprite",void 0),c(n(i),"activeSprite",void 0),c(n(i),"node",void 0),i}return t(i,e),o(i,[{key:"active",set:function(e){null!=this.inactiveSprite?this.skin.spriteFrame=e?this.activeSprite:this.inactiveSprite:this.node.active=e}}]),i}(l)).prototype,"skin",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=h))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./UIStatisticalItem.ts","./Component.ts","./ResourceGroup.ts","./NPCResources.ts","./GlobalConfig.ts","./Event.ts","./Utils.ts","./EntityView.ts","./LoadoutGroup.ts","./Status.ts","./Metrics.ts","./EntityData.ts","./History.ts","./SkillGroup.ts","./NpcSKills.ts","./NpcData.ts","./PlayerResources.ts","./PlayerSkills.ts","./PlayerData.ts","./ZIndex.ts","./UIDamge.ts","./DamegManager.ts","./HeadInfo.ts","./EntityManager.ts","./SkillType.ts","./SkillItem.ts","./SkillManager.ts","./Entity.ts","./ResourcesHelper.ts","./Main.ts","./Adapter.ts","./DropdownItem.ts","./TileInfoPanel.ts","./StatisticalManager.ts","./UIStatisticalData.ts","./UIAgentStatusItem.ts","./UIAgentStatus.ts","./Environment.ts","./DropdownOptionData.ts","./UITeamOptionData.ts","./Dropdown.ts","./UITeamAgent.ts","./UITeamScroll.ts","./ResourceView.ts","./Environment25D.ts","./Map25D.ts","./Environment2D.ts","./World.ts","./UIGame.ts","./Tile25.ts","./Replay.ts","./Packet.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});